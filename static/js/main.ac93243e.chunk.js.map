{"version":3,"sources":["components/Header.module.css","pages/Chooser.module.css","pages/Shortcode.module.css","components/TranslatedInput.module.css","components/HtmlInput.module.css","components/CoverphotoPicker.module.css","components/OverflowMenu.module.css","pages/App.module.css","components/FancyInput.module.css","pages/Editor.module.css","fluent/fluentBy.js","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","fluent/Localized.js","hooks/useUser.js","components/Header.js","hooks/useKeyPress.js","pages/Chooser.js","components/UrlInput.js","components/FancyInput.js","pages/Shortcode.js","graphql/mutations.js","hooks/useSaveBlock.js","graphql/queries.js","hooks/useLoadBlock.js","components/Popover.js","hooks/useOnOutsideClick.js","components/TranslatedInput.js","components/BlockMenu.js","components/HtmlInput.js","components/SharingEditor.js","components/EmailInput.js","components/PermissionsEditor.js","components/MultiButton.js","images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png","images/coverphotos/thumbs/Aktion.png","images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png","images/coverphotos/thumbs/Welcome-to-Volt.png","components/CoverphotoPicker.js","components/PropertiesEditor.js","components/InlineEditorBlockText.js","components/InlineEditorBlockButton.js","components/InlineEditorBlockHeadline.js","components/InlineEditorBlockDivider.js","components/InlineEditorBlock.js","components/ContentEditor.js","pages/Editor.js","components/OverflowMenu.js","pages/App.js","fluent/l10n.js","index.js","components/PermissionsEditor.module.css","components/PropertiesEditor.module.css","components/SharingEditor.module.css","components/InlineEditorBlock.module.css","components/Repeater.module.css"],"names":["module","exports","negotiateLanguages","require","fluentByObject","object","userLocales","supportedLocales","Object","keys","length","lookupedLocale","defaultLocale","strategy","fluentByArray","array","key","map","item","filter","Boolean","fluentByAny","any","fallback","Array","isArray","result","value","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","Localized","props","elems","br","Fragment","children","withLocalization","Inner","l10n","React","useContext","FluentContext","createElement","globalSupportedLocales","thisSupportedLocales","locale","includes","currentLocales","getString","args","useLocalization","useUser","forceRefetch","useState","user","setUser","loggedIn","setLoggedIn","useEffect","window","hasOwnProperty","useUser_user","useUser_loggedIn","fetch","domains","backend","mode","credentials","response","json","data","status","username","email","split","catch","error","console","Header","title","rightActions","notificationBanner","className","classes","header","headerBar","useKeyPress","callback","onKeyup","event","addEventListener","removeEventListener","rightHeaderActions","user_editable_links","editable","userPageAlreadyExists","setUserPageAlreadyExists","history","useHistory","forbidden","setForbidden","setValue","alreadyExists","setAlreadyExists","setError","push","handleCheckIfPathExists","useCallback","newValue","target","toLowerCase","forbidden_letters","letters","newValue_split","forbidden_letters_filtered","codes","startsWith","allowed","exists","to","style","marginLeft","marginRight","vars","chooserInput","hideSubmitButton","domainPrefix","type","placeholder","onChange","content","slug","replace","href","flatMap","slice","role","rel","url_regex","email_regex","is_email_not_url_regex","UrlInput","defaultValue","onBlur","onError","text","setText","handleTextChange","schema_parts","schema","shift","after_schema","join","match","handleBlur","FancyInput","redirectLink","setRedirectLink","isSubmittable","setIsSubmittable","generateRedirectLink","handleRedirectLink","use_as","redirect","method","headers","body","JSON","stringify","r","a","input","flexGrow","display","flexDirection","onClick","saveBlock_Mutation","gql","useSaveBlock","apollo_client","useApolloClient","useSnackbar","enqueueSnackbar","closeSnackbar","newBlock","final_resolve","snackbarKey","__typename","loadingDataPromise","mutate","mutation","variables","block","variant","preventDuplicate","autoHideDuration","_id","saveBlock","message","race","setTimeout","persist","getBlock_Query","useLoadBlock","query","loadedBlock","Popover","ref","handler","trigger","anchorRef","useRef","open","setOpen","paperRef","listener","current","contains","document","closePopover","Math","random","toString","substring","undefined","prevOpen","Portal","position","top","right","bottom","left","zIndex","cursor","Popper","anchorEl","transition","placement","disablePortal","modifiers","name","enabled","options","altBoundary","rootBoundary","padding","altAxis","tether","TransitionProps","Fade","transformOrigin","TranslatedInputContext","createContext","showTranslations","TranslatedInputProvider","filterByLocale","textArray","filtered","setShowTranslations","toggleShowTranslations","oldShowTranslations","currentLocale","setCurrentLocale","setCurrentLocaleExternal","newLocale","Provider","locales","useTranslatedInputContext","LocalesMenu","prefersDarkMode","matchMedia","matches","setLocale","popoverProps","Paper","sx","maxWidth","height","maxHeight","overflow","elevation","MenuList","autoFocus","width","marginTop","List","ListSubheader","whiteSpace","lineHeight","margin","backgroundColor","thisLocale","index","MenuItem","selected","Divider","opacity","ListItemIcon","ListItemText","TranslatedInput","arrayWithLocales","setArrayWithLocales","log","currentText","t","handleChange","newTextValue","findIndex","best","translatedInput","translationHelp","toUpperCase","setType","toggle_active","active","onRemoveRow","addRowBefore","addRowAfter","handleAddRowBefore","blockId","icon","label","option","VerticalAlignTop","VerticalAlignBottom","VisibilityOff","Visibility","Delete","Close","getInLineRangeLength","element","whichLine","normalize","getSelection","selection","range","rangeCount","getRangeAt","clonedRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","cloneContents","rangeLength","childNodes","nodeType","detach","getCaretPosition","cs","getComputedStyle","paddingY","parseFloat","paddingTop","paddingBottom","borderY","borderTopWidth","borderBottomWidth","elementHeight","offsetHeight","offset","getOffset","caretOffset","getCaretOffset","inFirstLine","inLastLine","caretPositionFromStart","node","textContent","nodeName","getRangeLengthWithLinebreaks","textLength","innerText","caretPositionFromEnd","positionFromLineStart","positionFromStart","positionFromEnd","HtmlInput","linebreaks","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeToNextInput","inputRef","__html","fakeDefaultValue","setFakeDefaultValue","old_text","old_fakeDefaultValue","newHtmlValue","innerHTML","trim","handleTextBlur","keyDownHandler","shiftKey","execCommand","preventDefault","caret","start","end","texts","handlePaste","originalEvent","clipboardData","getData","onKeyDown","onInput","onPaste","rebuild_textarea","show_placeholder","contentEditable","dangerouslySetInnerHTML","SharingEditor","defaultBlock","onClose","newPath","setNewPath","properties","setProperties","path","savePath","oldProperties","newProperties","action","viewStatistics","click","Modal","hideBackdrop","backdrop","dialog","inputWrapper","linebreak","actions","marginInlineStart","marginInlineEnd","emails_regex","EmailInput","multiple","emails","LocalizedRole","RolesMenu","changeRole","removePermission","setAnchorEl","handleClose","currentTarget","Menu","MenuListProps","Edit","sortPermissions","permissions","owner","p","sort","b","localeCompare","special","other","PermissionsEditor","defaultPermissions","user_email","inputRepaintKey","setInputRepaintKey","setPermissions","newEmails","setNewEmails","newRole","setNewRole","setNewPermission","newPermissions","obj","obj_new","tmp_id","uuidv4","permission","unshift","addPermissions","newEmail","addNewPermissionFromInput","oldInputRepaintKey","doesNotHaveVoltEuropa","doesNotHavePublic","dialogsWrapper","emailInput","triggerProps","menuButton","KeyboardArrowDown","permissionRow","ownerInfo","MultiButton","ariaLabel","items","choosen","setChoosen","handleClick","dataset","pointerEvents","verticalAlign","coverphoto","no_image","backgroundImage","marginBottom","ratio","volt_bonn_thumb","welcome_to_volt_thumb","plakatschlange_thumb","aktion_thumb","alt","src","addTmpIds","defaultProperties","updateProperty","propertyKey","newPropertyValue","propertyTypes","link","description","imprint","privacy_policy","tags","main_headline","translatedInputProps","main_headline_input","propertiesFrame","properties_row","InlineEditorBlockText","onSaveBlock","onAddRowAfter","publishTextChange","handleMergeToPrevInput","handleMergeToNextInput","InlineEditorBlockButton","setLink","publishChanges","InlineEditorBlockHeadline","InlineEditorBlockDivider","InlineEditorBlockInbetweenComponent","component","InlineEditorBlock","defaultContentConfig","reorderHandle","actionButton","loadBlock","setBlock","handleChange_Type","handleSaveBlock","block_input","form_active","form_deactivated","getLastLineStartNode","reverse","lastLineNode","childNode","thisChildNodes","moveCursorToOffsetInLine","contentEditableElement","lastLineStartNode","focus","lastLineStartNodeLength","createRange","setStart","collapse","sel","removeAllRanges","addRange","ContentEditor","contentConfigs","setContentConfigs","inputRefs","setInputRefs","newContentConfigs","saveInputRef","newInputRefs","goToPrevInput","prevInputRef","thisIndex","goToNextInput","nextInputRef","firstLineStartNode","getFirstLineStartNode","focusLastLine","lastInputRef","handleRowChange","newContentConfig","oldContentConfig","addRowByIndex","isNaN","new_rows","splice","filteredContentConfigs","contentConfig","Add","onDragEnd","destination","source","list","startIndex","endIndex","from","removed","reorder","droppableId","isDropDisabled","provided","innerRef","droppableProps","draggableId","isDragDisabled","disableInteractiveElementBlocking","shouldRespectForcePress","draggableProps","row","form","inlineRowButton","dragHandleButton","dragHandleProps","attr","Editor","isSharingEditorOpen","setIsSharingEditorOpen","openSharingEditor","closeSharingEditor","isPermissionsEditorOpen","setIsPermissionsEditorOpen","openPermissionsEditor","closePermissionsEditor","saveType","newType","gottenBlock","saveProperties","saveContent","newContent","savePermissions","manuallySaveEverything","editor","OverflowMenuContext","OverflowMenuProvider","setItems","updateMenu","itemsToAdd","removeMenu","itemsToRemove","newItems","todoData","menuRouteMatch","useRouteMatch","selected_route","params","loginLogoutButton","new_selected","encodeURIComponent","location","app","Shortcode","de","en","fr","_supportedLocales_","_defaultLocale_","fetchMessages","default","messages","FluentResource","createMessagesGenerator","all","fetched","reduce","cur","assign","generateBundles","bundle","FluentBundle","addResource","f","AppLocalizationProvider","onLocaleChange","ReactLocalization","getDefaultBundles","bundles","setBundles","new_bundles","loadBundles","frontend","client","ApolloClient","uri","cache","InMemoryCache","defaultOptions","watchQuery","fetchPolicy","AppLanguageWrapper","navigator","languages","setUserLocales","umami","systemLocales","language","trackEvent","handleLanguageChange","handleCurrentLocalesChange","useMediaQuery","theme","useMemo","createTheme","palette","ApolloProvider","ThemeProvider","anchorOrigin","vertical","horizontal","domRoot","getElementById","onLanguageChange","ReactDOM","render"],"mappings":"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","file":"static/js/main.ac93243e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3mObx\",\"headerBar\":\"Header_headerBar__2YU41\",\"notificationBanner\":\"Header_notificationBanner__104SP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chooserInput\":\"Chooser_chooserInput__JXUde\",\"hideSubmitButton\":\"Chooser_hideSubmitButton__5jsIt\",\"domainPrefix\":\"Chooser_domainPrefix__2HRVV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Shortcode_input__Av6rm\",\"hideSubmitButton\":\"Shortcode_hideSubmitButton__mbXgB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"translatedInput\":\"TranslatedInput_translatedInput__1_Lhx\",\"content\":\"TranslatedInput_content__2svOi\",\"translationHelp\":\"TranslatedInput_translationHelp__1C7eF\",\"changeLocaleButton\":\"TranslatedInput_changeLocaleButton__14uSq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rebuild_textarea\":\"HtmlInput_rebuild_textarea__2u8XW\",\"show_placeholder\":\"HtmlInput_show_placeholder__3tbxN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverphoto\":\"CoverphotoPicker_coverphoto__1VzG0\",\"no_image\":\"CoverphotoPicker_no_image__16v64\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overflow_menu\":\"OverflowMenu_overflow_menu__2r1Nx\",\"menuGroup\":\"OverflowMenu_menuGroup__QvAa7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3hbGO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FancyInput_error__2dhxG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__2hX0g\",\"loadingContent\":\"Editor_loadingContent__2fqdK\",\"editor_form_row\":\"Editor_editor_form_row__17Pul\"};","const { negotiateLanguages } = require('@fluent/langneg')\n\nfunction fluentByObject(object = {}, userLocales = ['en']){\n  const supportedLocales = Object.keys(object)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return object[lookupedLocale[0]]\n}\n\nfunction fluentByArray(array = [], userLocales = ['en'], key = 'locale') {\n  const supportedLocales = array.map(item => item[key]).filter(Boolean)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return array.filter(item => item[key] === lookupedLocale[0])\n}\n\nfunction fluentByAny(any = '', userLocales = ['en'], fallback = '') {\n  if (Array.isArray(any)) {\n    const result = fluentByArray(any, userLocales)\n    if (Array.isArray(result) && result.length > 0) {\n      any = result[0].value\n    }\n  } else if (typeof any === 'object') {\n    any = fluentByObject(any, userLocales)\n  }\n  if (typeof any !== 'string') {\n    any = fallback\n  }\n  return any\n}\n\nmodule.exports = {\n  fluentByObject,\n  fluentByArray,\n  fluentByAny,\n}\n","var map = {\n\t\"./de.ftl\": [\n\t\t216,\n\t\t3\n\t],\n\t\"./en.ftl\": [\n\t\t217,\n\t\t4\n\t],\n\t\"./fr.ftl\": [\n\t\t218,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 208;\nmodule.exports = webpackAsyncContext;","import React from 'react'\nimport {\n  Localized as LocalizedOriginal,\n  // withLocalization,\n} from '@fluent/react'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nimport { FluentContext } from '../../node_modules/@fluent/react/esm/context.js'\n\nconst Localized = props => (\n  <LocalizedOriginal\n    key={props.id}\n    {...props}\n    elems={{\n      br: <br />,\n      ...props.elems,\n    }}\n  >\n    <React.Fragment>{props.children}</React.Fragment>\n  </LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n  function WithLocalization(props) {\n    const l10n = React.useContext(FluentContext)\n\n    const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n    const fluentByObject = (object, fallback) => {\n      if (!(!!fallback)) {\n        fallback = null\n      }\n\n      if (!!object) {\n        const globalSupportedLocales = l10n.supportedLocales || []\n        const thisSupportedLocales = Object.keys(object).filter(locale => globalSupportedLocales.includes(locale))\n\n        const currentLocales = negotiateLanguages(\n          l10n.userLocales,\n          thisSupportedLocales,\n          { defaultLocale: l10n.defaultLocale }\n        )\n\n        for (const locale of currentLocales) {\n          if (!!object[locale]) {\n            return object[locale]\n          }\n        }\n\n        return fallback\n      }\n\n      return fallback\n    }\n\n    return React.createElement(Inner, { fluentByObject, getString, ...props })\n  }\n  return WithLocalization\n}\n\nfunction useLocalization() {\n  const l10n = React.useContext(FluentContext)\n\n  const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n  return { ...l10n, getString }\n}\n\nexport {\n  negotiateLanguages,\n  withLocalization,\n  Localized,\n  Localized as default,\n  useLocalization,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/\n","import { useState, useEffect } from 'react'\n\nexport default function useUser(forceRefetch = false) {\n  const [user, setUser] = useState({})\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  useEffect(() => {\n    if (forceRefetch !== true && window.hasOwnProperty('useUser_user') && window.hasOwnProperty('useUser_loggedIn')) {\n      setUser(window.useUser_user)\n      setLoggedIn(window.useUser_loggedIn)\n    }else{\n      fetch(`${window.domains.backend}user.json`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (\n            !!data\n            && !!data.user\n            && !!data.user.id\n            && !!data.user.status\n          ) {\n            data.user.username = (!!data.user.email ? data.user.email || '' : '').split('@')[0]\n\n            window.useUser_user = data.user\n            window.useUser_loggedIn = true\n            setUser(data.user)\n            setLoggedIn(true)\n          } else {\n            window.useUser_user = {}\n            window.useUser_loggedIn = false\n            setUser({})\n            setLoggedIn(false)\n          }\n        })\n        .catch(error => console.error(error))\n    }\n  }, [forceRefetch, setUser, setLoggedIn])\n\n  return [user, loggedIn]\n}\n","import classes from './Header.module.css'\n\nexport default function Header({ title, rightActions, notificationBanner }) {\n  return <header className={classes.header}>\n    <div className={classes.headerBar}>\n      <h2>{title}</h2>\n      {rightActions}\n    </div>\n    {\n      !!notificationBanner\n        ? <div className={classes.notificationBanner}>{notificationBanner}</div>\n        : null\n    }\n  </header>\n}\n","import { useEffect } from 'react'\n\nexport default function useKeyPress(keys, callback) {\n  useEffect(() => {\n    function onKeyup(event) {\n      if (keys.includes(event.key)) {\n        callback(event)\n      }\n    }\n    window.addEventListener('keyup', onKeyup)\n    return () => window.removeEventListener('keyup', onKeyup)\n  }, [keys, callback])\n}\n","import { Fragment, useState, useCallback, useEffect } from 'react'\nimport classes from './Chooser.module.css'\n\nimport { Link, useHistory } from 'react-router-dom'\n\nimport { withLocalization, Localized } from '../fluent/Localized.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\n\nfunction Chooser({ getString, rightHeaderActions }) {\n  const [user, ] = useUser()\n  const username = user.username || ''\n  const user_editable_links = (user.editable || [])\n  const [userPageAlreadyExists, setUserPageAlreadyExists] = useState(null)\n\n  const history = useHistory()\n  const [forbidden, setForbidden] = useState({})\n  const [value, setValue] = useState('')\n  const [alreadyExists, setAlreadyExists] = useState(null)\n  const [error, setError] = useState('')\n\n  useKeyPress(['Enter'], () => {\n    history.push(`/edit/${value}`)\n  })\n\n  const handleCheckIfPathExists = useCallback(event => {\n    const newValue = (event.target.value || '').toLowerCase()\n    setValue(newValue)\n\n    const forbidden_letters = (forbidden.letters || '').split('')\n    const newValue_split = (newValue || '').split('')\n    const forbidden_letters_filtered = forbidden_letters.filter(value => !newValue_split.includes(value))\n\n    const forbidden_codes = forbidden.codes || []\n    const value_is_a_forbidden_code = forbidden_codes.includes(newValue)\n\n    if (value_is_a_forbidden_code) {\n      setAlreadyExists(null)\n      setError('This path is not allowed.')\n    } else if (forbidden_letters_filtered.length < forbidden_letters.length) {\n      setAlreadyExists(null)\n      setError('This path contains forbidden characters.')\n    } else if (newValue.startsWith('volt')) {\n      setAlreadyExists(null)\n      setError('A path can\\'t start with \"volt\".')\n    } else if (newValue === '') {\n      setAlreadyExists(null)\n      setError('')\n    } else {\n      setError('')\n      fetch(`${window.domains.backend}quickcheck/${newValue}`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (data.allowed === false) {\n            setAlreadyExists(null)\n            setError('You are not allowed to edit this code.')\n          } else {\n            if (data.exists === true) {\n              setAlreadyExists(true)\n              setError('')\n            } else if (newValue_split.includes('.')) {\n              setAlreadyExists(null)\n              setError('Codes with a dot are restricted to people. Please contact thomas.rosen@volteuropa.org to use volt.link for your Volt Account.')\n            } else {\n              setAlreadyExists(false)\n              setError('')\n            }\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          setAlreadyExists(false)\n        })\n    }\n  }, [setValue, setAlreadyExists, forbidden.letters, forbidden.codes])\n\n  useEffect(() => {\n    fetch(`${window.domains.backend}forbidden_codes/`, {\n      mode: 'cors',\n      credentials: 'include',\n    })\n      .then(response => response.json())\n      .then(data => {\n        setForbidden(data)\n      })\n      .catch(error => {\n        console.error(error)\n        setForbidden({})\n      })\n  }, [setForbidden])\n\n  useEffect(() => {\n    const newValue = (username || '').toLowerCase()\n\n    if (newValue !== '') {\n      fetch(`${window.domains.backend}quickcheck/${newValue}`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (data.allowed === false) {\n            setUserPageAlreadyExists(null)\n          } else {\n            if (data.exists === true) {\n              setUserPageAlreadyExists(true)\n            } else {\n              setUserPageAlreadyExists(false)\n            }\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          setUserPageAlreadyExists(false)\n        })\n    } else {\n      setUserPageAlreadyExists(null)\n    }\n  }, [username, setUserPageAlreadyExists])\n\n  return <div>\n    <Header\n      title={<Localized id=\"chooser_header_title\" />}\n      rightActions={rightHeaderActions || null}\n    />\n\n    {\n      username !== ''\n        ? <>\n          <h2><Localized id={userPageAlreadyExists === true ? 'edit_user_page_headline' : 'create_user_page_headline'} /></h2>\n          <p><Localized id={userPageAlreadyExists === true ? 'edit_user_page_info' : 'create_user_page_info'} /></p>\n          <Link to={`/edit/${username}`}>\n            <button style={{ marginLeft: '0', marginRight: '0' }}>\n              <Localized\n                id={userPageAlreadyExists === true ? 'edit_user_page_button' : 'create_user_page_button'}\n                vars={{ username }}\n              />\n            </button>\n          </Link>\n          <br />\n          <br />\n        </>\n        : null\n    }\n    <h2><Localized id=\"chooser_any_link_headline\" /></h2>\n    <p><Localized id=\"chooser_any_link_info\" /></p>\n\n    <div className={`${classes.chooserInput} ${alreadyExists === null ? classes.hideSubmitButton : ''}`}>\n      <p className={classes.domainPrefix}>volt.link/</p>\n      <input type=\"text\" placeholder={getString('type_a_path')} onChange={handleCheckIfPathExists}/>\n      {\n        alreadyExists === null\n          ? null\n          : <Link to={`/edit/${value}`}>\n              <button className=\"green\">\n              {alreadyExists ? getString('edit_path_button') : getString('create_path_button')}\n              </button>\n            </Link>\n      }\n    </div>\n    {\n      error !== ''\n        ? <>\n          <h3 className=\"red\"><Localized id=\"headline_errors\" /></h3>\n          <p>{error}</p>\n        </>\n        : null\n    }\n\n    {\n      user_editable_links.length > 0\n        ? <>\n          <br />\n          <div className=\"buttonRow usesLinks\">\n            {\n              user_editable_links\n              .filter(content => content.slug.startsWith(value) || (content.slug.replace(/!/, '')).startsWith(value))\n              .map(content => <a key={content.slug} href={`/edit/${content.slug}`}><button>{content.slug}</button></a>)\n            }\n          </div>\n        </>\n        : null\n    }\n\n    <br />\n    <hr />\n\n    <h2>Restrictions</h2>\n    <ul>\n      <li>These letters are not allowed: <code>{forbidden.letters ||''}</code> (And of course: Don't use whitespace!)</li>\n      <li>\n        These paths are not allowed: {\n          (forbidden.codes || [])\n          .filter(code => !code.includes('/') && !code.includes('.'))\n          .flatMap(code => [<code key={code}>{code}</code>, <Fragment key={code+'separator'}>, </Fragment>])\n          .slice(0, -1)\n        }\n      </li>\n      <li>The dot (<code>.</code>) is used for Volt Accounts.</li>\n    </ul>\n\n    <h2>Best Practices</h2>\n\n    <h3>General</h3>\n    <ul>\n      <li>Keep it short!</li>\n      <li>Seperate words with hyphens (<code>-</code>). This makes it readable by humans and parsable by search engines. (Try not to use underscores (<code>_</code>). Your favorite search provider will thank you :D)</li>\n      <li>It is not important if you use upper- or lower-case letters.</li>\n      <li>Use letters people can type. The less international characters the better.</li>\n      <li>\n        <span role=\"img\" aria-label=\"EU-flag-emoji\"></span> Emojis are possible. But like before. Use them sparingly and check if others can type and see them on their device.<br/>\n        <a href=\"https://emojipedia.org/emoji-11.0/\" target=\"_blank\" rel=\"noopener noreferrer\">Emoji 11</a> and earlier should be okay.<br/>\n        And better don't mix emojis and normals letters.\n      </li>\n    </ul>\n\n    <h3>City Teams</h3>\n    <p>Use the name of your city team without the Volt prefix or a common international name.</p>\n    <p>If two cities have the same name, add your country's <a href=\"https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes\" target=\"_blank\" rel=\"noopener noreferrer\">two letter shortcode</a> before it (eg: <code className=\"filled\">de-bonn</code>).</p>\n    <p>Use the full city/state/team name if possible. Not everybody knows the abbreviation. But keep it short.</p>\n    <p>Example:</p>\n    <ul>\n      <li>Volt Bonn  <code className=\"filled\">bonn</code></li>\n      <li>Volt Kln  <code className=\"filled\">kln</code> or <code className=\"filled\">cologne</code></li>\n    </ul>\n\n    <h3>Personal Pages</h3>\n    <p>The link of your personal page should match your Volt Europa account.</p>\n    <p>We want to look professional, so please don't use your socialmedia handle.</p>\n    <p>We are a lot of people in Volt. People with the same first or lastname exist. To prevent name collisions, use your Volt Account username. (The part before the @ sign.)</p>\n    <p>Examples for \"Thomas Rosen\":</p>\n    <ul>\n      <li>Do  <code className=\"filled\">thomas.rosen</code></li>\n      <li>Don't  <code className=\"filled\">thomas_rosen_official_123</code>, <code className=\"filled\">thomas</code> or <code className=\"filled\">rosen</code></li>\n    </ul>\n\n    <h3>Redirects</h3>\n    <p>There are three options of naming redirects:</p>\n    <ul>\n      <li>random letters or words (<code className=\"filled\">123abc</code>),</li>\n      <li>words describing the redirect content (<code className=\"filled\">de-events</code>) and</li>\n      <li>words describing where the redirect content is used (<code className=\"filled\">flyer-bonn</code>).</li>\n    </ul>\n    <p>Use a random text or describe where the redirect is used if you'll change the link in the future.</p>\n\n    <h3>Translation</h3>\n    <p>You can provide translations for text for these langues:</p>\n    <ul>\n      <li>English</li>\n      <li>Deutsch</li>\n      <li>Espaol</li>\n      <li>Francais</li>\n      <li>Italiano</li>\n      <li>Nederlands</li>\n      <li>Portugues</li>\n    </ul>\n    <p>Contact <a href=\"mailto:thomas.rosen@volteuropa.org\">Thomas</a> for more languages. We'll add more as needed. {/*(We're aspecially interested in people speaking Arabic.)*/}</p>\n\n    <h3>Email Addresses</h3>\n    <p>You can of course link to email addresses.</p>\n    <p>But like you write <code className=\"filled\">https://</code> before normal links, you need to write <code className=\"filled\">mailto:</code> before email addresses.</p>\n    <p>Examples:</p>\n    <ul>\n      <li>bonn@voltdeutschland.org  <code className=\"filled\">mailto:bonn@voltdeutschland.org</code></li>\n    </ul>\n\n    <h3>Legal</h3>\n    <p>The default imprint is the one from Volt Europa. You can change it to the correct link of your chapter.</p>\n\n    <h3>Statistics</h3>\n    <p>As with the whole volt.link project, the statistics are currently in beta.</p>\n\n    <h3>Deletion</h3>\n    <p>Links can't be deleted as nobody likes to scan a QR-Code, just to receive an <a href=\"https://volt.link/error\">error page</a>.</p>\n    <p>But links can of course be reused. Contact <a href=\"mailto:thomas.rosen@volteuropa.org\">Thomas</a> if you need get access to a link.</p>\n\n    <footer>\n      <a href=\"mailto:thomas.rosen@volteuropa.org\"><Localized id=\"contact\" /></a>\n      &nbsp;  &nbsp;\n      <a href=\"https://github.com/voltbonn/edit.volt.link\" target=\"_blank\" rel=\"noopener noreferrer\"><Localized id=\"source_code\" /></a>\n    </footer>\n  </div>\n}\n\nexport default withLocalization(Chooser)\n\n/*\n\n\n    <input\n      type=\"text\"\n      placeholder=\"title\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n    <textarea\n      placeholder=\"description\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n*/\n","import { useCallback, useState } from 'react'\n\nconst url_regex = /^([A-Z0-9+-.]+:(?:\\/\\/)?)[\\w\\u00C0-\\u00FF_.-]+(?:\\.[\\w\\u00C0-\\u00FF_.-]+)+[\\w\\u00C0-\\u00FF_~:/?#[\\]!%$&'()@*+,;=.-]+$/gui\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui\nconst is_email_not_url_regex = /^[^:/]+@.+$/gui\n\nfunction UrlInput({\n  defaultValue = '',\n  onChange,\n  onBlur,\n  onError,\n  placeholder = 'https://',\n  style,\n  className\n}) {\n  const [text, setText] = useState(defaultValue)\n\n  const handleTextChange = useCallback((event) => {\n    const value = event.target.value ||''\n    // let isSubmittable = false\n    let error = ''\n\n    if (value !== '') {\n      const schema_parts = value.split(':')\n      const schema = schema_parts.shift()\n      const after_schema = schema_parts.join(':')\n\n      if (schema === 'tel') {\n        // isSubmittable = true\n      } else if (schema === 'mailto' || value.match(is_email_not_url_regex)) {\n        if (after_schema.match(email_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_mailto_url'\n        }\n      } else {\n        if (value.match(url_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_url'\n        }\n      }\n    }\n\n    if (onChange) {\n      onChange(value)\n    }\n\n    if (onError) {\n      onError(error)\n    }\n\n    setText(value)\n  }, [onChange, onError])\n\n  const handleBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  return <input\n    type=\"url\"\n    onChange={handleTextChange}\n    onBlur={handleBlur}\n    defaultValue={defaultValue}\n    placeholder={placeholder}\n    style={style}\n    className={className}\n  />\n}\n\nexport default UrlInput\n","import { useState } from 'react'\n\nimport { Localized } from '../fluent/Localized.js'\nimport classes from './FancyInput.module.css'\n\nfunction FancyInput({ children, className, style, ...props }) {\n  const [error, setError] = useState('')\n\n  return <div\n    className={className}\n    style={style}\n  >\n    {children({ setError })}\n    {error ? <div className={classes.error}><Localized id={'error_'+error} /></div> : null}\n  </div>\n}\n\nexport default FancyInput\n","import React, { useState, useCallback } from 'react'\nimport classes from './Shortcode.module.css'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { withLocalization, Localized } from '../fluent/Localized.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport Header from '../components/Header.js'\nimport UrlInput from '../components/UrlInput.js'\nimport FancyInput from '../components/FancyInput.js'\n\nfunction Redirect({ getString, rightHeaderActions }) {\n  const history = useHistory()\n  const [redirectLink, setRedirectLink] = useState('')\n  const [isSubmittable, setIsSubmittable] = useState(false)\n  const [error, setError] = useState('')\n\n  useKeyPress(['Enter'], () => {\n    if (isSubmittable) {\n      generateRedirectLink()\n    }\n  })\n\n  const handleRedirectLink = useCallback(value => {\n    setRedirectLink(value)\n\n    if (value === '') {\n      setIsSubmittable(false)\n    } else {\n      setIsSubmittable(true)\n    }\n  }, [setRedirectLink, setIsSubmittable])\n\n  const generateRedirectLink = useCallback(() => {\n    if (isSubmittable) {\n      const data = {\n        use_as: 'redirect',\n        redirect: redirectLink,\n      }\n\n      fetch(`${window.domains.backend}set_redirect`, {\n        mode: 'cors',\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(data)\n      })\n        .then(r => r.json())\n        .then(async data => {\n          if (typeof data.error === 'string') {\n            console.error(data.error)\n            setError(data.error)\n          } else if (typeof data.code === 'string') {\n            history.push(`/edit/${data.code}`)\n          } else {\n            setError('Undefined Error. Please contact thomas.rosen@volteuropa.org')\n          }\n        })\n        .catch(async error => {\n          console.error(error)\n          setError(error)\n        })\n    }\n  }, [isSubmittable, redirectLink, history])\n\n  return <div>\n    <Header\n      title={<Localized id=\"create_shortcode_headline\" />}\n      rightActions={rightHeaderActions || null}\n    />\n\n    <p><Localized id=\"create_shortcode_info\" /></p>\n\n    <div className={`${classes.input} ${isSubmittable === true ? '' : classes.hideSubmitButton }`}>\n      <FancyInput\n        style={{ flexGrow: '1', display: 'flex', flexDirection: 'column' }}\n      >\n        {({ setError }) => (\n          <UrlInput\n            onError={setError}\n            placeholder={getString('create_shortcode_url_placeholder')}\n            onChange={handleRedirectLink}\n          />\n        )}\n      </FancyInput>\n      {\n        isSubmittable === true\n          ? <button className=\"green\" onClick={generateRedirectLink}>\n              <Localized id=\"create_shortcode_url_submit\" />\n            </button>\n          : null\n      }\n    </div>\n\n    {\n      error !== ''\n        ? <>\n          <h3 className=\"red\"><Localized id=\"headline_errors\" /></h3>\n          <p>{error}</p>\n        </>\n        : null\n    }\n  </div>\n}\n\nexport default withLocalization(Redirect)\n","import { gql } from '@apollo/client'\n\nexport const saveBlock_Mutation = gql`\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n`\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { saveBlock_Mutation } from '../graphql/mutations.js'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useSaveBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleSaveBlock = useCallback((newBlock) => {\n    return new Promise(final_resolve => {\n      let snackbarKey = null\n\n      newBlock = {...newBlock}\n\n      if (\n        typeof newBlock === 'object'\n        && newBlock !== null\n        && newBlock.hasOwnProperty('__typename')\n      ) {\n        delete newBlock.__typename\n      }\n\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.mutate({\n          mutation: saveBlock_Mutation,\n          variables: {\n            block: newBlock\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string') {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              }\n            } else {\n              final_resolve({\n                ...newBlock,\n                _id: data.saveBlock,\n              })\n\n              enqueueSnackbar(getString('path_editor_status_saved'), {\n                variant: 'success',\n                preventDuplicate: false,\n                autoHideDuration: 2000,\n              })\n            }\n          })\n          .catch(async error => {\n            console.error(error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar(getString('path_editor_status_error_while_saving', {\n              error: error.message,\n            }), {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_saving'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleSaveBlock\n}\n\nexport default useSaveBlock\n","import { gql } from '@apollo/client'\n\nexport const getBlock_Query = gql`\n  query getBlock ($_id: ID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        lastModified\n        created\n      }\n    }\n  }\n`\nexport const getBlockBySlug_Query = gql`\n  query getBlockBySlug ($slug: ID!) {\n    blockBySlug (slug: $slug) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        lastModified\n        created\n      }\n      permissions {\n        email\n        role\n      }\n    }\n  }\n`\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlock_Query } from '../graphql/queries'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useLoadBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleLoadBlock = useCallback(_id => {\n    return new Promise(final_resolve => {\n    let snackbarKey = null\n\n    if (!_id || _id === '') {\n      final_resolve({\n        type: 'text',\n      })\n    } else {\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.query({\n          query: getBlock_Query,\n          variables: {\n            _id,\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string' || !data.block) {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              }\n            }else{\n              const loadedBlock = data.block\n              final_resolve(loadedBlock)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar('[could not load data] '+error.message, {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_saving'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n    }\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleLoadBlock\n}\n\nexport default useLoadBlock\n","import { useState, useRef } from 'react'\n\nimport {\n  Portal,\n  Fade,\n  Popper,\n} from '@mui/material'\n\nimport useOnOutsideClick from '../hooks/useOnOutsideClick.js'\n\nconst randomString = () => (Math.random() + 1).toString(36).substring(7)\n\nfunction Popover ({\n  trigger,\n  children = () => {},\n}) {\n  const anchorRef = useRef(null)\n  const [open, setOpen] = useState(false)\n\n  const paperRef = useRef(null)\n  useOnOutsideClick(paperRef, () => {\n    setOpen(false)\n  })\n\n  const handlePopoverToggleClick = event => {\n    setOpen((prevOpen) => !prevOpen)\n  }\n\n  const closePopover = () => {\n    setOpen(false)\n  }\n\n  const id = open ? 'popover-'+randomString() : undefined\n\n  return <>\n\n    {trigger({\n      ref: anchorRef,\n      'aria-describedby': id,\n      onClick: handlePopoverToggleClick,\n    })}\n\n  <Portal>\n    <div\n      style={{\n        display: (open ? 'block' : 'none'),\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: 1000,\n        cursor: 'pointer',\n      }}\n    />\n\n    <Popper\n      id={id}\n      open={open}\n      anchorEl={anchorRef.current}\n      transition\n      placement=\"bottom-start\"\n      disablePortal={true}\n      modifiers={[\n        {\n          name: 'flip',\n          enabled: true,\n          options: {\n            altBoundary: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n        {\n          name: 'preventOverflow',\n          enabled: true,\n          options: {\n            altAxis: true,\n            altBoundary: true,\n            tether: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n      ]}\n      style={{\n        zIndex: 1000,\n      }}\n    >\n      {({ TransitionProps }) => (\n        <Fade {...TransitionProps}>\n          <div>\n          {\n            !!children && typeof children === 'function'\n            ? children({\n              ref: paperRef,\n              style: {\n                transformOrigin: 'top left',\n              },\n              closePopover,\n            })\n            : null\n          }\n          </div>\n        </Fade>\n      )}\n    </Popper>\n\n    </Portal>\n  </>\n}\n\nexport default Popover\n","import { useEffect } from 'react'\n\nexport default function useOnOutsideClick(ref, handler) {\n  useEffect(\n    () => {\n      const listener = (event) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return\n        }\n\n        handler(event)\n      }\n\n      document.addEventListener(\"mousedown\", listener)\n      document.addEventListener(\"touchstart\", listener)\n\n      return () => {\n        document.removeEventListener(\"mousedown\", listener)\n        document.removeEventListener(\"touchstart\", listener)\n      }\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]\n  )\n}\n","import React, {\n  useState,\n  useEffect,\n  useCallback,\n  createContext,\n  useContext,\n} from 'react'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\nimport { fluentByArray } from '../fluent/fluentBy.js'\n\nimport {\n  Paper,\n  MenuList,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  List,\n  ListSubheader,\n} from '@mui/material'\n\nimport {\n  CloseSharp as CloseIcon,\n  Visibility as ShowIcon,\n  VisibilityOff as HideIcon,\n} from '@mui/icons-material'\n\nimport Popover from './Popover.js'\n\nimport classes from './TranslatedInput.module.css'\n\nconst TranslatedInputContext = createContext({\n  locale: 'en',\n  showTranslations: false,\n})\n\n\nfunction TranslatedInputProvider({ children }){\n  const {\n    userLocales = [],\n    supportedLocales = [],\n    defaultLocale = 'en',\n  } = useLocalization()\n\n  const filterByLocale = useCallback(textArray => {\n    const filtered = fluentByArray(textArray, userLocales, 'locale')\n\n    if (Array.isArray(filtered)) {\n      return filtered\n    }\n\n    return []\n  }, [\n    userLocales,\n  ])\n\n  const [showTranslations, setShowTranslations] = useState(false)\n\n  const toggleShowTranslations = useCallback(() => {\n    setShowTranslations(oldShowTranslations => !oldShowTranslations)\n  }, [ setShowTranslations ])\n\n  const [currentLocale, setCurrentLocale] = useState(userLocales[0] ||supportedLocales[0] || defaultLocale)\n\n  const setCurrentLocaleExternal = useCallback(newLocale => {\n    setCurrentLocale(newLocale)\n    setShowTranslations(true)\n  }, [ setCurrentLocale, setShowTranslations ])\n\n  return (\n    <TranslatedInputContext.Provider value={{\n      currentLocale,\n      setCurrentLocale: setCurrentLocaleExternal,\n      locales: supportedLocales,\n      filterByLocale,\n      showTranslations,\n      toggleShowTranslations,\n    }}>\n      {children}\n    </TranslatedInputContext.Provider>\n  )\n}\n\nfunction useTranslatedInputContext() {\n  return useContext(TranslatedInputContext)\n}\n\nfunction LocalesMenu({ trigger }) {\n  const { getString } = useLocalization()\n\n  let prefersDarkMode = false\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    prefersDarkMode = true\n  }\n\n  const {\n    currentLocale,\n    setCurrentLocale,\n    showTranslations,\n    toggleShowTranslations,\n  } = useTranslatedInputContext()\n\n  const {\n    supportedLocales = [],\n  } = useLocalization()\n\n  const setLocale = useCallback(newLocale => {\n    if (typeof setCurrentLocale === 'function') {\n      setCurrentLocale(newLocale)\n    }\n  }, [ setCurrentLocale ])\n\n  return <>\n  <Popover trigger={trigger}>\n    {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            height: 'auto',\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              marginTop: '-8px',\n            }}\n          >\n            <List\n              style={{\n                width: '100%',\n                maxWidth: '100%',\n                marginTop: '-8px',\n              }}\n            >\n              <ListSubheader\n                style={{\n                  whiteSpace: 'nowrap',\n                  lineHeight: '1',\n                  margin: '-4px 0 0 0',\n                  padding: '12px 16px 12px',\n                  backgroundColor: prefersDarkMode ? '#2e2e2e' : '#fff',\n                }}\n              >\n                <Localized id=\"locale_menu_choose_locale_label\" />\n              </ListSubheader>\n\n              <div style={{height: '4px'}}></div>\n\n              {\n                supportedLocales\n                .map((thisLocale, index) => (\n                  <MenuItem\n                    key={thisLocale}\n                    selected={thisLocale === currentLocale}\n                    onClick={() => setLocale(thisLocale)}\n                  >\n                    {getString('locale_'+thisLocale)}\n                  </MenuItem>\n              ))}\n            </List>\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={toggleShowTranslations}>\n              <ListItemIcon>\n                {\n                  showTranslations\n                  ? <HideIcon />\n                  : <ShowIcon />\n                }\n              </ListItemIcon>\n              <ListItemText>\n                {\n                  showTranslations\n                  ? <Localized id=\"locale_menu_hide_translation_help_label\" />\n                  : <Localized id=\"locale_menu_show_translation_help_label\" />\n                }\n              </ListItemText>\n            </MenuItem>\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id=\"block_menu_close_menu\" />\n              </ListItemText>\n            </MenuItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n  </>\n}\n\nfunction TranslatedInput({\n  defaultValue,\n  onChange,\n  onBlur,\n  children = null,\n}) {\n  const [arrayWithLocales, setArrayWithLocales] = useState([])\n\n  useEffect(() => {\n    console.log('defaultValue', defaultValue)\n    if (Array.isArray(defaultValue)) {\n      setArrayWithLocales(defaultValue)\n    } else {\n      setArrayWithLocales([])\n    }\n  }, [defaultValue, setArrayWithLocales])\n\n  // useEffect(() => {\n  //   if (defaultValue !== arrayWithLocales) {\n  //     setArrayWithLocales(defaultValue)\n  //   }\n  // }, [ arrayWithLocales, defaultValue, setArrayWithLocales ])\n\n  const {\n    currentLocale,\n    filterByLocale,\n    showTranslations,\n  } = useTranslatedInputContext()\n\n  let currentText = [...arrayWithLocales].filter(t => t.locale === currentLocale)\n  if (currentText.length > 0) {\n    currentText = currentText[0].value\n  } else {\n    currentText = ''\n  }\n\n  const handleChange = useCallback(newTextValue => {\n    let newValue = [...arrayWithLocales]\n    if (arrayWithLocales.length > 0) {\n      if (newValue.findIndex(t => t.locale === currentLocale) > -1) {\n        newValue = newValue\n          .map(t => {\n            if (t.locale === currentLocale) {\n              return {\n                ...t,\n                value: newTextValue,\n              }\n            }\n            return t\n          })\n          .filter(t => t.value !== '')\n      } else {\n        newValue = [\n          ...newValue,\n          {locale: currentLocale, value: newTextValue},\n        ]\n        .filter(t => t.value !== '')\n      }\n    } else {\n      newValue = [{locale: currentLocale, value: newTextValue}]\n    }\n\n    setArrayWithLocales(newValue)\n\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setArrayWithLocales, arrayWithLocales, currentLocale, onChange])\n\n  const handleBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(arrayWithLocales)\n    }\n  }, [onBlur, arrayWithLocales])\n\n  const best = filterByLocale(arrayWithLocales.filter(t => t.locale !== currentLocale))\n\n  if (typeof children === 'function') {\n    return <div className={classes.translatedInput}>\n      {/* <div className={classes.content}> */}\n        <div style={{ flexGrow: '1', width: '100%' }}>\n          {children({\n            key: currentLocale,\n            defaultValue: currentText,\n            onChange: handleChange,\n            onBlur: handleBlur,\n          })}\n        </div>\n        {\n          showTranslations === true && best.length > 0\n            ? <div className={classes.translationHelp}>\n                {\n                  best\n                  .map(t => <p key={t.locale}><strong>{t.locale.toUpperCase()}:</strong> {t.value}</p>)\n                }\n              </div>\n            : null\n        }\n      {/* </div> */}\n      {/* {locales_menu} */}\n    </div>\n  }\n\n  return null\n}\n\nexport {\n  LocalesMenu,\n  TranslatedInputContext,\n  TranslatedInputProvider,\n  useTranslatedInputContext,\n  TranslatedInput,\n  TranslatedInput as default,\n}\n","import { useCallback } from 'react'\n\nimport {\n  Paper,\n  MenuList,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  List,\n  ListSubheader,\n} from '@mui/material'\n\nimport {\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n  Delete as DeleteIcon,\n  Close as CloseIcon,\n  VerticalAlignTop as VerticalAlignTopIcon,\n  VerticalAlignBottom as VerticalAlignBottomIcon,\n\n  InsertDriveFileSharp as PageIcon,\n  LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  Crop75Sharp as ButtonIcon,\n  TitleSharp as HeadlineIcon,\n  NotesSharp as TextIcon,\n  Remove as DividerIcon,\n} from '@mui/icons-material'\n\nimport { Localized, withLocalization } from '../fluent/Localized.js'\n\nimport Popover from './Popover.js'\n\nfunction BlockMenu ({\n  getString,\n\n  trigger,\n\n  type,\n  setType,\n\n  toggle_active = null,\n  active = null,\n  onRemoveRow = null,\n  addRowBefore = null,\n  addRowAfter = null,\n}) {\n  let prefersDarkMode = false\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    prefersDarkMode = true\n  }\n\n  const handleAddRowBefore = useCallback(() => {\n\n    // const newBlock = {\n    //   type,\n    // }\n\n    const newBlockId = ''\n\n    addRowBefore({\n      blockId: newBlockId,\n    })\n  }, [ addRowBefore ])\n\n  return <>\n  <Popover\n    trigger={trigger}\n  >\n    {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            height: 325,\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              marginTop: '-8px',\n            }}\n          >\n            <List\n              style={{\n                width: '100%',\n                maxWidth: '100%',\n                marginTop: '-8px',\n              }}\n            >\n              <ListSubheader\n                style={{\n                  whiteSpace: 'nowrap',\n                  lineHeight: '1',\n                  margin: '-4px 0 0 0',\n                  padding: '12px 16px 12px',\n                  backgroundColor: prefersDarkMode ? '#2e2e2e' : '#fff',\n                }}\n              >\n                <Localized id=\"block_menu_choose_type_label\" />\n              </ListSubheader>\n\n              <div style={{height: '4px'}}></div>\n\n              {\n                [\n                  { value: 'page', icon: <PageIcon />, label: getString('block_menu_type_label_page') },\n                  { value: 'redirect', icon: <RedirectIcon />, label: getString('block_menu_type_label_redirect') },\n                  { value: 'person', icon: <PersonIcon />, label: getString('block_menu_type_label_person') },\n                  { value: 'button', icon: <ButtonIcon />, label: getString('block_menu_type_label_button') },\n                  { value: 'headline', icon: <HeadlineIcon />, label: getString('block_menu_type_label_headline') },\n                  // { value: 'headline3', label: getString('block_menu_type_label_headline3') },\n                  { value: 'text', icon: <TextIcon />, label: getString('block_menu_type_label_text') },\n                  { value: 'divider', icon: <DividerIcon />, label: getString('block_menu_type_label_divider') },\n                ]\n                .map((option, index) => (\n                  <MenuItem\n                    key={option.value}\n                    selected={option.value === type}\n                    onClick={() => setType(option.value)}\n                  >\n                    <ListItemIcon>\n                      {option.icon}\n                    </ListItemIcon>\n                    <ListItemText>\n                      {option.label}\n                    </ListItemText>\n                  </MenuItem>\n              ))}\n            </List>\n\n            {\n              (\n                addRowBefore\n                || addRowAfter\n                || (typeof active === 'boolean' && toggle_active)\n                || onRemoveRow\n              )\n                ? <Divider style={{opacity: 0.2}} />\n                : null\n            }\n\n            {\n              addRowBefore\n                ? <MenuItem style={{marginTop:'8px'}} onClick={handleAddRowBefore}>\n                    <ListItemIcon>\n                      <VerticalAlignTopIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_add_before\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              addRowAfter\n                ? <MenuItem style={{marginTop:'8px'}} onClick={addRowAfter}>\n                    <ListItemIcon>\n                      <VerticalAlignBottomIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_add_after\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              typeof active === 'boolean' && toggle_active\n                ? <MenuItem style={{marginTop:'8px'}} onClick={toggle_active}>\n                    <ListItemIcon>\n                      {\n                        active\n                        ? <VisibilityOffIcon />\n                        : <VisibilityIcon />\n                      }\n                    </ListItemIcon>\n                    <ListItemText>\n                      {\n                        active\n                        ? <Localized id=\"block_menu_hide\" />\n                        : <Localized id=\"block_menu_show\" />\n                      }\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              onRemoveRow\n                ? <MenuItem style={{marginTop:'8px'}} onClick={onRemoveRow}>\n                    <ListItemIcon>\n                      <DeleteIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_delete\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id=\"block_menu_close_menu\" />\n              </ListItemText>\n            </MenuItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n  </>\n}\n\nexport default withLocalization(BlockMenu)\n","import React, { useCallback, useRef, useState, useEffect } from 'react'\n\nimport {\n  offset as getCaretOffset,\n  getOffset,\n} from 'caret-pos'\n\nimport classes from './HtmlInput.module.css'\n\n\nfunction getRangeLengthWithLinebreaks(element){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  for (const node of content.childNodes) {\n    if (node.nodeType === 3) { // node type = 3 is a text node\n      rangeLength += node.textContent.length\n    } else if (node.nodeType === 1 && node.nodeName === 'BR') { // node type = 1 is an element node\n      rangeLength += 1\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getInLineRangeLength(element, whichLine){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  if (content.childNodes.length > 0) {\n    if (whichLine === 'first') {\n      if (content.childNodes[0].nodeType === 3) {\n        rangeLength = content.childNodes[0].length\n      } else {\n        rangeLength = 0\n      }\n    } else if (whichLine === 'last') {\n      if (content.childNodes[content.childNodes.length-1].nodeType === 3) {\n        rangeLength = content.childNodes[content.childNodes.length-1].length\n      } else {\n        if (content.childNodes.length > 1) {\n          if (content.childNodes[content.childNodes.length-2].nodeType === 3) {\n            rangeLength = content.childNodes[content.childNodes.length-2].length\n          } else {\n            rangeLength = 0\n          }\n        } else {\n          rangeLength = 0\n        }\n      }\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getCaretPosition(element){\n  // get element height without padding and border\n  const cs = getComputedStyle(element)\n  const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom)\n  const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth)\n  const elementHeight = element.offsetHeight - paddingY - borderY\n\n  // get caret position\n  const offset = getOffset(element)\n  const caretOffset = getCaretOffset(element)\n  caretOffset.top = caretOffset.top - offset.top\n  caretOffset.left = caretOffset.left - offset.left\n\n  // check if caret is in the first line\n  let inFirstLine = caretOffset.top < caretOffset.height\n\n  // check if caret is in the last line\n  let inLastLine = elementHeight - caretOffset.top < caretOffset.height\n\n  // define caret position from start of text\n  const caretPositionFromStart = getRangeLengthWithLinebreaks(element)\n\n  // calc caret position from end of text\n  let textLength = element.innerText.length ||0\n  if (textLength < 0) {\n    textLength = 0\n  }\n  const caretPositionFromEnd = textLength - caretPositionFromStart\n\n  return {\n    inFirstLine,\n    inLastLine,\n    left: caretOffset.left,\n    top: caretOffset.top,\n    height: caretOffset.height,\n    positionFromLineStart: getInLineRangeLength(element, (inFirstLine ? 'first' : 'last')),\n    positionFromStart: caretPositionFromStart,\n    positionFromEnd: caretPositionFromEnd,\n  }\n}\n\nfunction HtmlInput({\n  defaultValue = '',\n  children,\n  className,\n  onChange,\n  onBlur,\n  onError,\n  linebreaks,\n  style,\n  placeholder = '',\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  ...props\n}) {\n  const inputRef = useRef(null)\n  const [text, setText] = useState('')\n  const [fakeDefaultValue, setFakeDefaultValue] = useState({ __html: '' })\n\n  useEffect(() => {\n    setText(old_text => {\n      if (old_text !== defaultValue) {\n        setFakeDefaultValue((old_fakeDefaultValue) => {\n          const newHtmlValue = defaultValue\n            // .replace(/\\t/g, '&emsp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            // .replace(/\\n/g, '<br />')\n\n          if (old_fakeDefaultValue.__html !== newHtmlValue) {\n            return {__html: newHtmlValue}\n          }\n          return old_fakeDefaultValue\n        })\n\n        return defaultValue\n      }\n      return old_text\n    })\n  }, [defaultValue, setText, setFakeDefaultValue])\n\n  const handleTextChange = useCallback((event) => {\n    let value = event.target.innerHTML || ''\n    // .replace(/&emsp;/g, '\\t')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n\n    if (linebreaks === false) {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, ' ')\n    } else {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, '\\n')\n    }\n\n    value = value.trim()\n    setText(value)\n\n    if (onChange) {\n      onChange(value)\n    }\n  }, [onChange, setText, linebreaks])\n\n  const handleTextBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  const keyDownHandler = useCallback(event => {\n    if (event.key === 'Enter' && event.shiftKey === true) {\n      // source: StackOverflow (https://stackoverflow.com/a/61237402)\n      if (linebreaks !== false) {\n        document.execCommand('insertLineBreak')\n      }\n      event.preventDefault()\n    } else if (event.key === 'Tab') {\n      document.execCommand('insertText', false, '\\t')\n      event.preventDefault()\n    } else if (event.key === 'ArrowUp') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine) {\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowLeft') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine && caret.positionFromStart <= 0) {\n          caret.positionFromLineStart = -1\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowDown') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine) {\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowRight') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine && caret.positionFromEnd <= 1) {\n          caret.positionFromLineStart = 0\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Enter') {\n      if (onSplitText) {\n        const caret = getCaretPosition(inputRef.current)\n\n        const innerText = inputRef.current.innerText\n        const start = innerText.slice(0, caret.positionFromStart)\n        const end = innerText.slice(caret.positionFromStart)\n\n        onSplitText({\n          texts: [start, end],\n        })\n        event.preventDefault()\n      }\n    } else if (event.key === 'Backspace') {\n      if (onMergeToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromStart === 0 && caret.inFirstLine) {\n          onMergeToPrevInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Delete') {\n      if (onMergeToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromEnd === 0 && caret.inLastLine) {\n          onMergeToNextInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    }\n  }, [inputRef, linebreaks, onGoToPrevInput, onGoToNextInput, onSplitText, onMergeToPrevInput, onMergeToNextInput])\n\n  useEffect(() => {\n    if (onInputRef) {\n      onInputRef(inputRef)\n    }\n  }, [onInputRef, inputRef])\n\n  const handlePaste = useCallback(event => {\n    // only accept plain text\n\n    // cancel paste\n    event.preventDefault()\n\n    // get text representation of clipboard\n    let text = (event.originalEvent || event).clipboardData.getData('text/plain')\n\n    if (linebreaks === false) {\n      text = text.replace(/\\n/g, ' ')\n    }\n\n    // insert text manually\n    document.execCommand('insertText', false, text)\n  }, [linebreaks])\n\n  return <div\n    ref={inputRef}\n    onKeyDown={keyDownHandler}\n    onInput={handleTextChange}\n    onBlur={handleTextBlur}\n    onPaste={handlePaste}\n    className={`${classes.rebuild_textarea} ${text.length === 0 ? classes.show_placeholder : ''} ${className}`}\n    contentEditable={true}\n    dangerouslySetInnerHTML={fakeDefaultValue}\n    style={style}\n    placeholder={placeholder}\n  />\n}\n\nexport default HtmlInput\n","import React, { useEffect, useState, useCallback }from 'react'\n\nimport {\n  Modal,\n} from '@mui/material'\nimport {\n  QrCodeSharp as QrCodeIcon,\n  AssessmentSharp as AssessmentIcon,\n  ContentCopySharp as CopyIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../fluent/Localized.js' // useLocalization\n\nimport classes from './SharingEditor.module.css'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction SharingEditor({\n  defaultBlock = {},\n  open = false,\n  onChange,\n  onClose,\n}) {\n\n  const [ newPath, setNewPath ] = useState('')\n  const [ properties, setProperties ] = useState({})\n\n  const {\n    trigger = {},\n  } = properties\n\n  const {\n\t\tpath = '',\n  } = trigger\n\n  useEffect(() => {\n    console.log('defaultBlock', defaultBlock)\n\n    setProperties(defaultBlock.properties)\n  }, [ setProperties, defaultBlock ])\n\n  const savePath = useCallback(() => {\n    setProperties(oldProperties => {\n      const newProperties = {...oldProperties}\n      if (newPath === '') {\n        if (newProperties.hasOwnProperty('trigger')) {\n          delete newProperties.trigger\n        }\n        if (newProperties.hasOwnProperty('action')) {\n          delete newProperties.action\n        }\n      } else {\n        newProperties.trigger = {\n\t\t    \ttype: 'path',\n\t\t    \tpath: newPath,\n\t\t    }\n\t\t    newProperties.action = {\n\t\t    \ttype: 'render_block',\n\t\t    }\n      }\n\n      return newProperties\n    })\n  }, [ newPath, setProperties ])\n\n  const viewStatistics = () => {\n    const a = document.createElement('a')\n    a.href = `https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  const gotoQrcodePage = () => {\n    const a = document.createElement('a')\n    a.href = `https://qrcode.volt.link/?c=volt.link/${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n      // BackdropComponent={<Backdrop open={true} className={classes.backdrop} />}\n      // aria-labelledby=\"modal-modal-title\"\n      // aria-describedby=\"modal-modal-description\"\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialog}>\n\n            <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Get the link</h1>\n            {/* <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p> */}\n\n            {/* <hr style={{ opacity: 0.2 }} /> */}\n\n            <div className={classes.inputWrapper}>\n              <HtmlInput\n                defaultValue={path}\n                onChange={setNewPath}\n                linebreak={false}\n                className={classes.input}\n              />\n              <button\n                onClick={savePath}\n              >\n                Save\n              </button>\n            </div>\n\n            <hr style={{ opacity: 0.2 }} />\n\n            <pre>\n              {JSON.stringify(properties, null, 4)}\n            </pre>\n\n            <hr style={{ opacity: 0.2 }} />\n\n            <div className={classes.actions}>\n              {\n                path !== ''\n                ? <div>\n                    <button className=\"text hasIcon\" onClick={gotoQrcodePage} style={{ marginInlineStart: '0' }}>\n                      <QrCodeIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_qrcode\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={viewStatistics}>\n                      <AssessmentIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_statistics\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={viewStatistics}>\n                      <CopyIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_copy_url\" /></span>\n                    </button>\n                  </div>\n                : <div></div>\n              }\n\n              <button onClick={onClose} className=\"green\" style={{ marginInlineEnd: '0' }}>Done</button>\n            </div>\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default SharingEditor\n","import { useCallback } from 'react'\n\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui // is surrounded by start and end tags\nconst emails_regex = /((?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?))/gui // is surrounded by a group\n\nfunction EmailInput({ multiple = false, onChange, onError, ...props }) {\n  const handleTextChange = useCallback((event) => {\n    if (onChange ||onError) {\n      let value = event.target.value ||''\n      let isSubmittable = false\n      let error = ''\n\n      if (value !== '') {\n        if (multiple === true) {\n          const emails = value.match(emails_regex)\n          if (emails) {\n            value = emails\n            isSubmittable = true\n          } else {\n            error = 'Invalid email(s) format'\n          }\n        } else {\n          if (value.match(email_regex)) {\n            isSubmittable = true\n          } else {\n            error = 'invalid_email'\n          }\n        }\n      }\n\n      if (onChange) {\n        if (isSubmittable) {\n          onChange(value)\n        } else {\n          if (multiple === true) {\n            onChange([])\n          } else {\n            onChange('')\n          }\n        }\n      }\n\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [multiple, onChange, onError])\n\n  return <input\n    type=\"email\"\n    onChange={handleTextChange}\n    {...props}\n  />\n}\n\nexport default EmailInput\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport {\n  Modal,\n  Menu,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n} from '@mui/material'\nimport {\n  KeyboardArrowDown as KeyboardArrowDownIcon,\n  Delete as DeleteIcon,\n  Close as CloseIcon,\n  Visibility as ViewerIcon,\n  Edit as EditorIcon,\n} from '@mui/icons-material'\nimport { v4 as uuidv4 } from 'uuid'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\n\nimport useUser from '../hooks/useUser.js'\n\nimport FancyInput from './FancyInput.js'\nimport EmailInput from './EmailInput.js'\n\nimport classes from './PermissionsEditor.module.css'\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction LocalizedRole({ role }) {\n  return <Localized id={'role-'+role} />\n}\n\nfunction RolesMenu({\n  role,\n  trigger,\n  changeRole,\n  removePermission,\n}){\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleOpen = event => {\n    setAnchorEl(event.currentTarget)\n  }\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <>\n    {trigger({\n      onClick: handleOpen,\n    })}\n\n    <Menu\n      anchorEl={anchorEl}\n      open={open}\n      onClose={handleClose}\n      MenuListProps={{\n        style: {\n          maxWidth: '100%',\n        },\n      }}\n    >\n        {\n          role === 'editor'\n          ? <MenuItem onClick={() => changeRole('viewer')}>\n              <ListItemIcon>\n                <ViewerIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"viewer\" />\n              </ListItemText>\n            </MenuItem>\n          : <MenuItem onClick={() => changeRole('editor')}>\n              <ListItemIcon>\n                <EditorIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"editor\" />\n              </ListItemText>\n            </MenuItem>\n        }\n\n        {\n          typeof removePermission === 'function'\n          ? <MenuItem onClick={removePermission}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              <ListItemText>\n                Remove\n              </ListItemText>\n            </MenuItem>\n          : null\n        }\n\n        <Divider style={{opacity: 0.2}} />\n\n        <MenuItem onClick={handleClose}>\n          <ListItemIcon>\n            <CloseIcon />\n          </ListItemIcon>\n          <ListItemText>\n            Close\n          </ListItemText>\n        </MenuItem>\n    </Menu>\n  </>\n}\n\nfunction sortPermissions(permissions) {\n  const owner = permissions\n    .filter(p => p.role === 'owner')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const special = permissions\n    .filter(p => p.email === '@volteuropa.org' || p.email === '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const other = permissions\n    .filter(p => p.role !== 'owner' && p.email !== '@volteuropa.org' && p.email !== '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  return [\n    ...owner,\n    ...special,\n    ...other,\n  ]\n}\n\nfunction PermissionsEditor({\n  defaultPermissions,\n  open = false,\n  onChange,\n  onClose,\n}) {\n  const { getString } = useLocalization()\n\n  const [{email: user_email = ''} = {}] = useUser() || []\n\n  const [inputRepaintKey, setInputRepaintKey] = useState(0)\n  const [permissions, setPermissions] = useState([])\n  const [newEmails, setNewEmails] = useState([])\n  const [newRole, setNewRole] = useState('editor')\n\n  const setNewPermission = useCallback(newPermissions => {\n    if (user_email !== '') {\n      newPermissions = addTmpIds(newPermissions || [])\n\n      const doesNotHaveOwner = newPermissions.filter(permission => permission.role === 'owner').length === 0\n      if (doesNotHaveOwner) {\n        newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n      }\n\n      setPermissions(newPermissions)\n    }\n  }, [ user_email, setPermissions ])\n\n  useEffect(() => {\n    if (Array.isArray(defaultPermissions)) {\n      setNewPermission(defaultPermissions)\n    } else {\n      setNewPermission([])\n    }\n  }, [ setNewPermission, defaultPermissions ])\n\n  const removePermission = useCallback(email => {\n    let newPermissions = permissions.filter(p => p.email !== email)\n    if (email === '@volteuropa.org') {\n      newPermissions = newPermissions.filter(p => p.email !== '@public')\n    }\n\n    const doesNotHaveOwner = permissions.filter(p => p.role === 'owner').length === 0\n    if (doesNotHaveOwner) {\n      newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, user_email, setPermissions, onChange])\n\n  const changeRole = useCallback((email, newRole) => {\n    const newPermissions = permissions.map(permission => {\n      if (permission.email === email) {\n        return {\n          ...permission,\n          role: newRole,\n        }\n      }\n      return permission\n    })\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, setPermissions, onChange])\n\n  const addPermissions = useCallback((newEmails, newRole) => {\n    if (newEmails.includes('@public')) {\n      newEmails.push('@volteuropa.org')\n    }\n    let newPermissions = permissions.filter(permission => !newEmails.includes(permission.email))\n    for (const newEmail of newEmails) {\n      newPermissions.unshift({ tmp_id: uuidv4(), email: newEmail, role: newRole })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, setPermissions, onChange])\n\n  const addNewPermissionFromInput = useCallback(() => {\n    addPermissions(newEmails, newRole)\n    setNewEmails([]) // reset the email-input | don't reset the role-input so it can be reused when entering multiple emails after each other // setNewRole('editor')\n    setInputRepaintKey(oldInputRepaintKey => oldInputRepaintKey + 1) // redraw the email-input\n  }, [ newEmails, newRole, addPermissions ])\n\n  if (!open) {\n    return null\n  }\n\n  const doesNotHaveVoltEuropa = permissions.filter(permission => permission.email === '@volteuropa.org').length === 0\n  const doesNotHavePublic = permissions.filter(permission => permission.email === '@public').length === 0\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n      // BackdropComponent={<Backdrop open={true} className={classes.backdrop} />}\n      // aria-labelledby=\"modal-modal-title\"\n      // aria-describedby=\"modal-modal-description\"\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialogsWrapper}>\n\n        <div className={classes.dialog}>\n          <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Give viewing and editing rights</h1>\n          <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p>\n          <div className={classes.inputWrapper} key={inputRepaintKey}>\n            <FancyInput className={classes.emailInput}>\n              {({ setError }) => (\n                <EmailInput\n                  multiple={true}\n                  onError={setError}\n                  defaultValue=\"\"\n                  onChange={setNewEmails}\n                  aria-label={getString('path_editor_permissions_edit_label')}\n                  placeholder={getString('path_editor_permissions_edit_placeholder')}\n                  style={{\n                    flexGrow: '1',\n                    // margin: '0',\n                    margin: 'var(--basis) 0',\n                    width: 'calc(100% - var(--basis_x2))',\n                  }}\n                />\n              )}\n            </FancyInput>\n            <RolesMenu\n              role={newRole}\n              changeRole={setNewRole}\n              trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={newRole} /> <KeyboardArrowDownIcon/></button>}\n            />\n          </div>\n\n          {\n            newEmails.length > 0 && newEmails[0].length > 0\n            ? <>\n                <hr />\n\n                <div className={classes.actions}>\n                  <button onClick={addNewPermissionFromInput} className=\"green\" style={{margin: '0'}}>\n                    {\n                      newEmails.length > 1\n                      ? <>Add People</>\n                      : <>Add Person</>\n                    }\n                  </button>\n                </div>\n              </>\n            : <>\n                {\n                  doesNotHaveVoltEuropa || doesNotHavePublic\n                  ? <div style={{ marginTop: 'var(--basis_x2)' }}>\n                    Make visible for\n                    {\n                      doesNotHaveVoltEuropa\n                      ? <button onClick={() => addPermissions(['@volteuropa.org'], 'viewer')}>Volt Europa</button>\n                      : null\n                    }\n                    {\n                      doesNotHavePublic\n                      ? <button onClick={() => addPermissions(['@public'], 'viewer')}>Public</button>\n                      : null\n                    }\n                  </div>\n                  : null\n                }\n\n                {\n                  permissions.length === 0\n                   ? null\n                   : <hr style={{ opacity: 0.2 }} />\n                }\n\n                {\n                  sortPermissions(permissions)\n                  .map(p => <div key={p.tmp_id} className={classes.permissionRow}>\n                    {\n                      p.email === '@public'\n                        ? <strong>Public</strong>\n                        : (\n                          p.email === '@volteuropa.org'\n                            ? <strong>Volt Europa</strong>\n                            : <span>{p.email}</span>\n                        )\n                    }\n\n                    {\n                      p.role === 'owner'\n                      ? <strong className={`type_button ${classes.ownerInfo}`}><LocalizedRole role={p.role} /></strong>\n                      : <RolesMenu\n                          role={p.role}\n                          removePermission={() => removePermission(p.email)}\n                          changeRole={(newRole) => changeRole(p.email, newRole)}\n                          trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={p.role} /> <KeyboardArrowDownIcon/></button>}\n                        />\n                    }\n                  </div>)\n                }\n\n                <hr style={{ opacity: 0.2 }} />\n\n                <div className={classes.actions}>\n                  <button onClick={onClose} className=\"green\" style={{margin: '0'}}>Done</button>\n                </div>\n              </>\n          }\n        </div>\n\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default PermissionsEditor\n","import { useState, useCallback, useEffect } from 'react'\n\nfunction MultiButton({ ariaLabel, items, defaultValue, onChange, style, className }) {\n  const [choosen, setChoosen] = useState()\n\n  useEffect(() => setChoosen(defaultValue), [defaultValue, setChoosen])\n\n  const handleClick = useCallback(event => {\n    const newValue = event.target.dataset.value\n    setChoosen(newValue)\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setChoosen, onChange])\n\n  return <div\n    aria-label={ariaLabel}\n    className={'buttonRow ' + (className ||'')}\n    style={{\n      display: 'inline-block',\n      ...style\n    }}\n  >\n    {\n      items.map(item => {\n        const value = item.value\n        const title = item.title\n        const icon = item.icon || null\n        return <button\n          key={value+'_'+title}\n          className={`${choosen === value ? 'choosen' : ''} ${!!icon ? 'hasIcon' : ''}`}\n          onClick={handleClick}\n          data-value={value}\n        >\n          <span style={{pointerEvents: 'none'}}>\n            {!!icon ? icon : null}\n            {!!title ? <span style={{verticalAlign: 'middle'}}>{title}</span> : null}\n          </span>\n        </button>\n      })\n    }\n  </div>\n}\n\nexport default MultiButton\n","export default __webpack_public_path__ + \"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png\";","export default __webpack_public_path__ + \"static/media/Aktion.89c1bcdf.png\";","export default __webpack_public_path__ + \"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png\";","export default __webpack_public_path__ + \"static/media/Welcome-to-Volt.39e04eca.png\";","\nimport classes from './CoverphotoPicker.module.css'\n\nimport Popover from './Popover.js'\n\nimport { Paper } from '@mui/material'\n\nimport { Localized, withLocalization } from '../fluent/Localized.js'\n\nimport MultiButton from '../components/MultiButton.js'\nimport FancyInput from '../components/FancyInput.js'\nimport UrlInput from '../components/UrlInput.js'\n\nimport plakatschlange_thumb from '../images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png'\nimport aktion_thumb from '../images/coverphotos/thumbs/Aktion.png'\nimport volt_bonn_thumb from '../images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png'\nimport welcome_to_volt_thumb from '../images/coverphotos/thumbs/Welcome-to-Volt.png'\n\n\nfunction CoverphotoPicker({ getString, defaultValue, onChange }) {\n  return (\n    <Popover\n      trigger={(triggerProps) => (\n        <div\n          className={`${classes.coverphoto} ${!defaultValue ? classes.no_image : ''}`}\n          style={{\n            backgroundImage: `url(${defaultValue})`,\n          }}\n        >\n          <button {...triggerProps}>Set Coverphoto</button>\n        </div>\n      )}\n    >\n      {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 'calc(calc(100vw - 32px) - var(--basis_x8))',\n            maxHeight: 'calc(calc(100vh - 32px) - var(--basis_x8))',\n            overflow: 'auto',\n            padding: 'var(--basis_x4)',\n          }}\n          elevation={8}\n        >\n          <h3><Localized id=\"path_editor_coverphoto_label\" /></h3>\n\n          <div>\n            <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n              <Localized id=\"path_editor_coverphoto_info\" vars={{\n                // width: type === 'person' ? '400px' : '1200px',\n                // height: type === 'person' ? '400px' : '400px',\n                // ratio: type === 'person' ? '1/1' : '3/1',\n                width: '1200px',\n                height: '400px',\n                ratio: '3/1',\n              }}/>\n            </em>\n\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onChange={onChange}\n                  value={defaultValue}\n                  type=\"text\"\n                  style={{\n                    marginRight: '0',\n                    marginLeft: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                />\n              )}\n            </FancyInput>\n\n            <MultiButton\n              onChange={onChange}\n              ariaLabel={getString('path_editor_coverphoto_label')}\n              defaultValue={defaultValue || ''}\n              items={[\n                {\n                  value: '',\n                  title: getString('path_editor_no_coverphoto'),\n                },\n                ...[\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg',\n                    icon: volt_bonn_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg',\n                    icon: welcome_to_volt_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg',\n                    icon: plakatschlange_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg',\n                    icon: aktion_thumb,\n                  },\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-green.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-red.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-blue.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-yellow.jpg',\n                  // 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Colours-Background-Big.jpeg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-green.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-red.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-blue.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-yellow.jpg',\n                  // 'https://www.volteuropa.org/og-default.png',\n                  // 'https://www.volteuropa.org/hero-default.jpg',\n                ]\n                .map(({value = '', icon = ''}) => ({\n                  value,\n                  icon: <img alt=\"\" src={icon} className=\"icon image\" />\n                }))\n              ]}\n            />\n\n          </div>\n        </Paper>\n      )}\n    </Popover>\n  )\n}\n\nexport default withLocalization(CoverphotoPicker)\n","import { useState, useCallback, useEffect } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport classes from './PropertiesEditor.module.css'\n\nimport { Localized, withLocalization } from '../fluent/Localized.js'\nimport UrlInput from '../components/UrlInput.js'\nimport HtmlInput from '../components/HtmlInput.js'\nimport FancyInput from '../components/FancyInput.js'\nimport CoverphotoPicker from '../components/CoverphotoPicker.js'\nimport TranslatedInput from '../components/TranslatedInput.js'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction addTmpIds(array) {\n  return [...(array || [])].map(obj => {\n    if (!obj.tmp_id) {\n      const obj_new = { ...obj }\n      obj_new.tmp_id = uuidv4()\n      return obj_new\n    }\n\n    return obj\n  })\n}\n\nfunction PropertiesEditor({ getString, type, defaultProperties = {}, onChange }) {\n  const [properties, setProperties] = useState({})\n\n  // const [coverphoto, setCoverphoto] = useState('')\n  // const [imprint, setImprint] = useState('')\n  // const [privacy_policy, setPrivacyPolicy] = useState('')\n  // const [link, setLink] = useState('')\n\n  // let [voltTeams, setVoltTeams] = useState([])\n  // voltTeams = voltTeams.map(({ id, name }) => ({ value: id, label: name }))\n\n  // const [voltTeamInfos, setVoltTeamInfos] = useState({\n  //   id: null,\n  //   name: ''\n  // })\n  // const setVoltTeamInfosFromSelect = useCallback((data) => {\n  //   setVoltTeamInfos({\n  //     id: data.value,\n  //     name: data.label,\n  //   })\n  // }, [setVoltTeamInfos])\n\n\n  const updateProperty = useCallback((propertyKey, newPropertyValue) => {\n    const propertyTypes = {\n      text: 'array',\n      slug: 'string',\n      link: 'string',\n      description: 'array',\n      coverphoto: 'string',\n      imprint: 'string',\n      privacy_policy: 'string',\n      tags: 'string',\n    }\n\n    const newProperties = { ...properties }\n\n    if (propertyTypes.hasOwnProperty(propertyKey)) {\n      switch (propertyTypes[propertyKey]) {\n        case 'array':\n          if (newPropertyValue.length > 0) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'string':\n          if (newPropertyValue !== '') {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        default:\n          newProperties[propertyKey] = newPropertyValue\n      }\n\n      if (JSON.stringify(newProperties) !== JSON.stringify(properties)) {\n        setProperties(newProperties)\n        if (onChange) {\n          onChange(newProperties)\n        }\n      }\n    }\n  }, [\n    properties,\n    setProperties,\n    onChange,\n  ])\n\n  useEffect(() => {\n    setProperties({\n      ...defaultProperties,\n      text: addTmpIds(defaultProperties.text || []),\n      description: addTmpIds(defaultProperties.description || []),\n    })\n  }, [\n    defaultProperties,\n    setProperties,\n  ])\n\n\n  // useEffect(() => {\n  //   fetch(`${window.domains.backend}teams_simple.json`, {\n  //     mode: 'cors',\n  //     credentials: 'include',\n  //   })\n  //     .then(response => response.json())\n  //     .then(data => {\n  //       if (typeof data.error === 'string') {\n  //         setVoltTeams([])\n  //       } else {\n  //         setVoltTeams(data)\n  //       }\n  //     })\n  //     .catch(error => {\n  //       console.error(error)\n  //       setVoltTeams([])\n  //     })\n  // }, [ setVoltTeams ])\n\n  return <>\n    <CoverphotoPicker\n      defaultValue={properties.coverphoto}\n      onChange={coverphoto => updateProperty('coverphoto', coverphoto)}\n    />\n\n    <div className={classes.main_headline}>\n      <TranslatedInput\n        defaultValue={properties.text}\n        onBlur={(value) => updateProperty('text', value)}\n      >\n        {(translatedInputProps) => {\n          return (\n          <HtmlInput\n            placeholder={getString('placeholder_main_headline')}\n            style={{ margin: '0' }}\n            linebreaks={true}\n            className={`${classes.main_headline_input} type_h1`}\n            {...translatedInputProps}\n          />\n          )\n        }}\n      </TranslatedInput>\n    </div>\n\n    <div className={classes.propertiesFrame}>\n\n      <div className={classes.properties_row}>\n        <h3><Localized id=\"path_editor_description_label\" /></h3>\n        <TranslatedInput\n          defaultValue={properties.description}\n          onBlur={(value) => updateProperty('description', value)}\n        >\n          {(translatedInputProps) => {\n            return (\n            <HtmlInput\n              aria-label={getString('path_editor_description_label')}\n              placeholder={getString('path_editor_description_placeholder')}\n              style={{ margin: '0' }}\n              linebreaks={true}\n              className=\"type_text\"\n              {...translatedInputProps}\n            />\n            )\n          }}\n        </TranslatedInput>\n      </div>\n\n      {/* <div className={classes.properties_row}>\n        <h3><Localized id=\"path_editor_tags_label\" /></h3>\n        <HtmlInput\n          onBlur={(value) => updateProperty('tags', value)}\n          type=\"text\"\n          placeholder={getString('path_editor_tags_placeholder')}\n          aria-label={getString('path_editor_tags_label')}\n          defaultValue={properties.tags}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: 'calc(100% - var(--basis_x2))'\n          }}\n        />\n      </div> */}\n\n      {/*\n        voltTeams && voltTeams.length > 0\n        ? <>\n          <h3><Localized id=\"path_editor_belongs_to_team_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_belongs_to_team_info\" /></em>\n          <Select\n            defaultValue={{\n              value: voltTeamInfos !== null ? voltTeamInfos.id || null : null,\n              label: voltTeamInfos !== null ? voltTeamInfos.name || '' : '',\n            }}\n            defaultInputValue={voltTeamInfos !== null ? voltTeamInfos.name || '' : ''}\n            onChange={setVoltTeamInfosFromSelect}\n            ariaLabel={getString('path_editor_belongs_to_team_search_placeholder')}\n            label={getString('path_editor_belongs_to_team_search_placeholder')}\n            placeholder={getString('path_editor_belongs_to_team_search_placeholder')}\n            options={voltTeams}\n            styles={custom_react_select_styles}\n            theme={custom_react_select_theme}\n          />\n        </>\n        : null\n      */}\n\n      {\n        type === 'page' || type === 'person'\n          ? <>\n            <div className={classes.properties_row}>\n            <h3><Localized id=\"path_editor_imprint_label\" /></h3>\n            <div>\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onBlur={(value) => updateProperty('imprint', value)}\n                  defaultValue={properties.imprint}\n                  type=\"text\"\n                  style={{\n                    margin: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                />\n              )}\n            </FancyInput>\n            </div>\n            </div>\n\n            <div className={classes.properties_row}>\n            <h3><Localized id=\"path_editor_privacy_policy_label\" /></h3>\n            <div>\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onBlur={(value) => updateProperty('privacy_policy', value)}\n                  defaultValue={properties.privacy_policy}\n                  type=\"text\"\n                  style={{\n                    margin: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                />\n              )}\n            </FancyInput>\n            </div>\n            </div>\n          </>\n          : (\n            type === 'redirect'\n              ? <>\n                <div className={classes.properties_row}>\n                <h3><Localized id=\"path_editor_redirect_label\" /></h3>\n                <FancyInput>\n                  {({ setError }) => (\n                    <UrlInput\n                      onError={setError}\n                      onBlur={(value) => updateProperty('link', value)}\n                      type=\"text\"\n                      placeholder={getString('path_editor_redirect_placeholder')}\n                      aria-label={getString('path_editor_redirect_label')}\n                      defaultValue={properties.link}\n                      style={{\n                        marginRight: '0',\n                        marginLeft: '0',\n                        width: 'calc(100% - var(--basis_x2))'\n                      }}\n                    />\n                  )}\n                </FancyInput>\n                </div>\n              </>\n              : null\n          )\n      }\n    </div>\n  </>\n}\n\nexport default withLocalization(PropertiesEditor)\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../fluent/Localized.js'\n\n// import { v4 as uuidv4 } from 'uuid'\n\nimport HtmlInput from '../components/HtmlInput.js'\nimport TranslatedInput from '../components/TranslatedInput.js'\n// import TranslationRepeater from '../components/TranslationRepeater.js'\n\nfunction InlineEditorBlockTextRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  onAddRowAfter,\n}) {\n  // const defaultLocale = getString('default_locale')\n  // const currentLocale = 'en'\n\n  const properties = block.properties || {}\n  const [text, setText] = useState([])\n  // const [key, setKey] = useState(0)\n\n  useEffect(() => {\n    setText(properties.text || [])\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  // const handleSplitText = useCallback(({ texts })=>{\n  //   if (onAddRowAfter) {\n  //     let firstNewTextValue = text\n  //     if (text.length > 0) {\n  //       if (firstNewTextValue.findIndex(t => t.locale === currentLocale) > -1) {\n  //         firstNewTextValue = firstNewTextValue.map(t => {\n  //           if (t.locale === currentLocale) {\n  //             return {\n  //               ...t,\n  //               value: texts[0],\n  //             }\n  //           }\n  //           return t\n  //         })\n  //       } else {\n  //         firstNewTextValue = [\n  //           ...firstNewTextValue,\n  //           {locale: currentLocale, value: texts[0]},\n  //         ]\n  //       }\n  //     } else {\n  //       firstNewTextValue = [{locale: currentLocale, value: texts[0]}]\n  //     }\n  //\n  //     // const firstBlock = {\n  //     //   ...block,\n  //     //   properties: {\n  //     //     ...block.properties,\n  //     //     text: firstNewTextValue,\n  //     //   },\n  //     // }\n  //\n  //     const secondBlock = {\n  //       type: block.type,\n  //       properties: {\n  //         text: [{\n  //           locale: currentLocale,\n  //           value: texts[1],\n  //         }],\n  //       },\n  //     }\n  //\n  //     setText(firstNewTextValue)\n  //     setKey(key + 1)\n  //\n  //     onSaveBlock(secondBlock, blockId => {\n  //       onAddRowAfter({\n  //         blockId,\n  //       })\n  //     })\n  //   }\n  // }, [key, setKey, setText, onSaveBlock, onAddRowAfter, block, text, currentLocale])\n\n  const handleMergeToPrevInput = useCallback(()=>{\n    if (onMergeToPrevInput) {\n      onMergeToPrevInput(block)\n    }\n  }, [onMergeToPrevInput, block])\n\n  const handleMergeToNextInput = useCallback(()=>{\n    if (onMergeToNextInput) {\n      onMergeToNextInput(block)\n    }\n  }, [onMergeToNextInput, block])\n\n  return <TranslatedInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n    // key={key}\n  >\n    {(translatedInputProps) => {\n      return (\n      <HtmlInput\n        placeholder={getString('placeholder_text')}\n        style={{ margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_text\"\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onMergeToPrevInput={handleMergeToPrevInput}\n        onMergeToNextInput={handleMergeToNextInput}\n        // onSplitText={handleSplitText}\n\n        {...translatedInputProps}\n      />\n      )\n    }\n    }\n  </TranslatedInput>\n}\n\nconst InlineEditorBlockText = withLocalization(InlineEditorBlockTextRaw)\n\nexport default InlineEditorBlockText\n\n/*\nreturn <TranslationRepeater\n    onChange={handleChange}\n    defaultValue={text}\n    addDefaultValue={() => ({ tmp_id: uuidv4(), locale: defaultLocale, value: '' })}\n    addButtonText={getString('path_editor_add_translation')}\n    input={InputWithLocal_props => {\n      const { onChange, ...InputWithLocal_rest } = InputWithLocal_props\n      return <HtmlInput\n        placeholder={getString('placeholder_text')}\n        {...InputWithLocal_rest}\n        onBlur={onChange}\n        style={{ ...InputWithLocal_props.style, margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_text\"\n      />\n    }}\n  />\n*/\n","import React, { useState, useCallback } from 'react'\n\nimport { withLocalization } from '../fluent/Localized.js'\n\nimport FancyInput from './FancyInput.js'\nimport HtmlInput from '../components/HtmlInput.js'\nimport UrlInput from '../components/UrlInput.js'\n\nfunction InlineEditorBlockButtonRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  // onMergeToPrevInput,\n  // onMergeToNextInput,\n}) {\n  // const defaultLocale = getString('default_locale')\n\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || [])\n  const [link, setLink] = useState(properties.link || '')\n\n  const currentLocale = 'en'\n  let currentText = text\n  .filter(t => t.locale === currentLocale)\n  if (text.length > 0) {\n    currentText = text[0].value\n  } else {\n    currentText = ''\n  }\n\n  const handleTextChange = useCallback(newTextValue => {\n    let newValue = [...text]\n    if (text.length > 0) {\n      if (newValue.findIndex(t => t.locale === currentLocale) > -1) {\n        newValue = newValue.map(t => {\n          if (t.locale === currentLocale) {\n            return {\n              ...t,\n              value: newTextValue,\n            }\n          }\n          return t\n        })\n      } else {\n        newValue = [\n          ...newValue,\n          {locale: currentLocale, value: newTextValue},\n        ]\n      }\n    } else {\n      newValue = [{locale: currentLocale, value: newTextValue}]\n    }\n\n    setText(newValue)\n  }, [setText, text, currentLocale])\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n          link,\n        },\n      })\n    }\n  }, [onChange, block, text, link])\n\n  return <div style={{\n    padding: 'var(--basis) 0',\n  }}>\n    <HtmlInput\n      placeholder={getString('placeholder_button')}\n      defaultValue={currentText}\n      onChange={handleTextChange}\n      onBlur={publishChanges}\n      style={{ margin: '0' }}\n      linebreaks={true}\n      className=\"hide_border type_button\"\n\n      onInputRef={onInputRef}\n      onGoToPrevInput={onGoToPrevInput}\n      onGoToNextInput={onGoToNextInput}\n    />\n\n    <FancyInput>\n      {({ setError }) => (\n        <UrlInput\n          onError={setError}\n          onChange={setLink}\n          onBlur={publishChanges}\n          type=\"text\"\n          defaultValue={link}\n          placeholder={getString('path_editor_item_link_label')}\n          style={{\n            margin: 'var(--basis) 0',\n            width: 'calc(100% - var(--basis_x2))',\n          }}\n        />\n      )}\n    </FancyInput>\n  </div>\n}\n\nconst InlineEditorBlockButton = withLocalization(InlineEditorBlockButtonRaw)\n\nexport default InlineEditorBlockButton\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../fluent/Localized.js'\n\nimport HtmlInput from '../components/HtmlInput.js'\nimport TranslatedInput from '../components/TranslatedInput.js'\n\nfunction InlineEditorBlockHeadlineRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  onAddRowAfter,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState([])\n\n  useEffect(() => {\n    setText(properties.text || [])\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  const handleMergeToPrevInput = useCallback(()=>{\n    if (onMergeToPrevInput) {\n      onMergeToPrevInput(block)\n    }\n  }, [onMergeToPrevInput, block])\n\n  const handleMergeToNextInput = useCallback(()=>{\n    if (onMergeToNextInput) {\n      onMergeToNextInput(block)\n    }\n  }, [onMergeToNextInput, block])\n\n  return <TranslatedInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n  >\n    {(translatedInputProps) => {\n      return (\n      <HtmlInput\n        placeholder={getString('placeholder_headline')}\n        style={{ margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_h2\"\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onMergeToPrevInput={handleMergeToPrevInput}\n        onMergeToNextInput={handleMergeToNextInput}\n\n        {...translatedInputProps}\n      />\n      )\n    }\n    }\n  </TranslatedInput>\n}\n\nconst InlineEditorBlockHeadline = withLocalization(InlineEditorBlockHeadlineRaw)\n\nexport default InlineEditorBlockHeadline\n","export default function InlineEditorBlockDivider() {\n  return <hr style={{\n    margin: 'calc(3.4 * var(--basis)) 0',\n  }} />\n}\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport { withLocalization } from '../fluent/Localized.js'\n\nimport BlockMenu from './BlockMenu.js'\nimport useSaveBlock from '../hooks/useSaveBlock.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\n\nimport InlineEditorBlockText from './InlineEditorBlockText.js'\nimport InlineEditorBlockButton from './InlineEditorBlockButton.js'\nimport InlineEditorBlockHeadline from './InlineEditorBlockHeadline.js'\nimport InlineEditorBlockDivider from './InlineEditorBlockDivider.js'\n\nimport classes from './InlineEditorBlock.module.css'\n\n// function addIds(array){\n//   if (Array.isArray(array)) {\n//     return array.map(item => {\n//       let new_item = { ...item }\n//       if (!new_item.hasOwnProperty('_id')) {\n//         new_item._id = uuidv4()\n//       }\n//       return new_item\n//     })\n//   }\n//   return array\n// }\n\n// function stripIDs(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction InlineEditorBlockInbetweenComponent({ type = 'text', ...props }){\n  let component = null\n\n  switch (type) {\n    case 'button':\n      component = <InlineEditorBlockButton {...props} />\n    break;\n    case 'headline':\n      component = <InlineEditorBlockHeadline {...props} />\n    break;\n    case 'divider':\n      component = <InlineEditorBlockDivider {...props} />\n    break;\n    default:\n      component = <InlineEditorBlockText {...props} />\n  }\n\n  return component\n}\n\nfunction InlineEditorBlockRaw({\n  fluentByObject,\n  getString,\n  defaultContentConfig = {},\n  className,\n  onChange,\n  reorderHandle,\n  onRemoveRow,\n  actionButton,\n  dataset = {},\n  addRowBefore,\n  addRowAfter,\n  permissions = [],\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n}) {\n  const saveBlock = useSaveBlock()\n  const loadBlock = useLoadBlock()\n\n  // const defaultLocale = getString('default_locale')\n\n  const [block, setBlock] = useState({\n    _id: defaultContentConfig.blockId || null,\n  })\n  const properties = block.properties || {}\n  const active = typeof properties.active === 'boolean' ? properties.active : true\n\n  useEffect(() => {\n    if (Object.keys(block).length === 1 && block.hasOwnProperty('_id')) {\n      loadBlock(block._id)\n        .then(loadedBlock => {\n          setBlock(loadedBlock)\n        })\n    }\n  }, [\n    loadBlock,\n    setBlock,\n    block,\n  ])\n\n  const handleChange_Type = useCallback(newValue => {\n    const newBlock = {\n      ...block,\n      type: newValue,\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n          })\n        }\n      })\n  }, [setBlock, block, saveBlock, onChange])\n\n  // const handleChange = useCallback(newBlock => {\n  //   setBlock(newBlock)\n\n  //   if (onChange) {\n  //     const target = wrapperDiv.current\n  //     target.value = newBlock\n  //     onChange({ target })\n  //   }\n  // }, [setBlock, onChange])\n\n  const toggle_active = useCallback(() => {\n    const newBlock = {\n      ...block,\n      properties: {\n        ...block.properties,\n        active: !active,\n      },\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n          })\n        }\n      })\n  }, [block, active, saveBlock, setBlock, onChange])\n\n  const handleSaveBlock = useCallback(newBlock => {\n    if (JSON.stringify(newBlock) !== JSON.stringify(block)) {\n      saveBlock(newBlock)\n        .then((newBlock) => {\n          setBlock(newBlock)\n          if (!block._id || block._id !== newBlock._id) {\n            onChange({\n              blockId: newBlock._id,\n            })\n          }\n        })\n    }\n  }, [saveBlock, block, onChange])\n\n  return <div\n    className={`${classes.block} ${className}`}\n    {...dataset}\n  >\n\n    <BlockMenu\n      {...{\n        type: block.type,\n        setType: handleChange_Type,\n        toggle_active,\n        active,\n        onRemoveRow,\n        addRowBefore,\n        addRowAfter,\n      }}\n\n      trigger={props => (\n        <div\n          {...props}\n          className={classes.reorderHandle}\n        >\n          {reorderHandle}\n        </div>\n      )}\n    />\n\n    <div className={`${classes.block_input} ${(active ? classes.form_active : classes.form_deactivated)}`}>\n      <InlineEditorBlockInbetweenComponent\n        type={block.type}\n        block={block}\n        onChange={handleSaveBlock}\n        onSaveBlock={handleSaveBlock}\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onSplitText={onSplitText}\n        onMergeToPrevInput={onMergeToPrevInput}\n        onMergeToNextInput={onMergeToNextInput}\n\n        onAddRowAfter={addRowAfter}\n      />\n    </div>\n\n  </div>\n}\n\nconst InlineEditorBlock = withLocalization(InlineEditorBlockRaw)\n\nexport default InlineEditorBlock\n","import { useState, useEffect, useCallback } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport {\n  Add as AddIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../fluent/Localized.js'\nimport InlineEditorBlock from '../components/InlineEditorBlock.js'\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport DragIndicatorIcon from '@mui/icons-material/DragIndicator'\n\nimport classes from './Repeater.module.css'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction getFirstLineStartNode(element){\n  element.normalize()\n\n  const childNodes = element.childNodes\n  if (childNodes.length > 0) {\n    return childNodes[0]\n  }\n\n  return element\n}\n\nfunction getLastLineStartNode(element) {\n  element.normalize()\n\n  const childNodes = [...element.childNodes].reverse()\n  if (childNodes.length > 0) {\n    let lastLineNode = element\n    if (childNodes[0].nodeType === 3) {\n      for (const childNode of childNodes) {\n        if (childNode.nodeType === 3) {\n          lastLineNode = childNode\n        } else if (childNode.nodeType === 1) {\n          break\n        }\n      }\n    } else {\n      if (childNodes.length > 1) {\n        if (childNodes[1].nodeType === 3) {\n          const thisChildNodes = childNodes.slice(1)\n          for (const childNode of thisChildNodes) {\n            if (childNode.nodeType === 3) {\n              lastLineNode = childNode\n            } else if (childNode.nodeType === 1) {\n              break\n            }\n          }\n        }\n      }\n    }\n\n    return lastLineNode\n  }\n\n  return element\n}\n\nfunction moveCursorToOffsetInLine(contentEditableElement, lastLineStartNode, offset = 0) {\n  contentEditableElement.focus()\n\n  // If this function exists... (IE 9+)\n  if (window.getSelection) {\n    const lastLineStartNodeLength = (\n      lastLineStartNode.nodeType === 3\n        ? lastLineStartNode.length\n        : lastLineStartNode.innerText.length\n    )\n\n    if (offset === -1 || offset > lastLineStartNodeLength) {\n      offset = lastLineStartNodeLength\n    }\n\n    const range = document.createRange()\n    range.setStart(lastLineStartNode, 0)\n    range.setEnd(lastLineStartNode, offset)\n    range.collapse(false) // false = collapse to end\n    const sel = window.getSelection()\n    sel.removeAllRanges()\n    sel.addRange(range)\n  }\n}\n\nfunction reorder(list, startIndex, endIndex) {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n\n  return result\n}\n\nfunction ContentEditor({ defaultValue = [], onChange }) {\n  const [contentConfigs, setContentConfigs] = useState([])\n  const [inputRefs, setInputRefs] = useState({})\n\n  useEffect(()=>{\n    if (contentConfigs.length === 0) {\n      if (defaultValue.length > 0) {\n        let newContentConfigs = addTmpIds(defaultValue)\n        setContentConfigs(newContentConfigs)\n      }\n    }\n  }, [contentConfigs, defaultValue, setContentConfigs])\n\n  const saveInputRef = useCallback((keys, inputRef) => {\n    const newInputRefs = {...inputRefs}\n\n    if (\n      !newInputRefs.hasOwnProperty(keys.tmp_id)\n      || newInputRefs[keys.tmp_id] !== inputRef\n    ) {\n      newInputRefs[keys.tmp_id] = inputRef\n      setInputRefs(newInputRefs)\n    }\n  }, [ inputRefs, setInputRefs ])\n\n  const goToPrevInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let prevInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex < index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        prevInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (prevInputRef) {\n      const lastLineStartNode = getLastLineStartNode(prevInputRef.current)\n      moveCursorToOffsetInLine(prevInputRef.current, lastLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const goToNextInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let nextInputRef = null\n    for (let thisIndex = 0; thisIndex < contentConfigs.length; thisIndex++) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex > index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        nextInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (nextInputRef) {\n      const firstLineStartNode = getFirstLineStartNode(nextInputRef.current)\n      moveCursorToOffsetInLine(nextInputRef.current, firstLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const focusLastLine = useCallback(() => {\n    let lastInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        lastInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (lastInputRef) {\n      const lastLineStartNode = getLastLineStartNode(lastInputRef.current)\n      moveCursorToOffsetInLine(lastInputRef.current, lastLineStartNode, -1)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  /*const splitText = useCallback((keys, { blocks: replacerBlocks }) => {\n    // const index = keys.index\n\n    // const newBlocks = [...blocks].splice(index, 0, ...replacerBlocks)\n    // setContentConfigs(newBlocks)\n\n    // let nextInputRef = null\n    // for (let thisIndex = 0; thisIndex < blocks.length; thisIndex++) {\n    //   const tmp_id = blocks[thisIndex].tmp_id\n    //   if (thisIndex > index + 1 && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n    //     nextInputRef = inputRefs[tmp_id]\n    //     break\n    //   }\n    // }\n\n    // if (nextInputRef) {\n    //   const firstLineStartNode = getFirstLineStartNode(nextInputRef.current)\n    //   moveCursorToOffsetInLine(nextInputRef.current, firstLineStartNode, caret.positionFromLineStart)\n    // }\n  }, []) // blocks, inputRefs\n  */\n\n  const handleRowChange = useCallback((keys, newContentConfig) => {\n    const newContentConfigs = [...contentConfigs]\n      .map(oldContentConfig => {\n        if (oldContentConfig.tmp_id === keys.tmp_id) {\n          return {\n            ...oldContentConfig,\n            ...newContentConfig,\n          }\n        }\n        return oldContentConfig\n      })\n\n    setContentConfigs(newContentConfigs)\n    onChange(newContentConfigs)\n  }, [contentConfigs, setContentConfigs, onChange])\n\n  const addRowByIndex = useCallback((index, offset = 0, newValue) => {\n    if (typeof newValue === 'object') {\n      newValue = {\n        tmp_id: uuidv4(),\n        ...newValue,\n      }\n    } else {\n      newValue = newValue || { tmp_id: uuidv4() }\n    }\n\n    if (typeof index === 'number' && !isNaN(index)) {\n      let new_rows = [...contentConfigs]\n      new_rows.splice(index + offset, 0, newValue)\n      setContentConfigs(new_rows)\n      onChange(new_rows)\n    }\n  }, [contentConfigs, setContentConfigs, onChange])\n\n\n  function onDragEnd(result) {\n    if (!result.destination) {\n      return\n    }\n\n    if (result.destination.index === result.source.index) {\n      return\n    }\n\n    const newContentConfigs = reorder(\n      contentConfigs,\n      result.source.index,\n      result.destination.index\n    )\n\n    setContentConfigs(newContentConfigs)\n    onChange(newContentConfigs)\n  }\n\n  const filteredContentConfigs = contentConfigs\n    .filter(contentConfig => contentConfig.tmp_id)\n\n  return <>\n  <div\n    style={{\n      position: 'relative',\n      width: 'calc(1000px + var(--basis_x8))',\n      maxWidth: '100%',\n      margin: 'var(--basis_x8) auto 0 auto',\n    }}\n  >\n    <div>\n      <button\n        onClick={() => addRowByIndex(0, 0, {})}\n        className=\"text hasIcon\"\n        style={{\n          margin: '0 0 var(--basis_x2) 0',\n        }}\n      >\n        <span style={{pointerEvents: 'none'}}>\n          <AddIcon className=\"icon\" />\n          <span style={{marginInlineStart: 'var(--basis_x2)', verticalAlign: 'middle'}}>\n            <Localized id=\"add_content_before\" />\n          </span>\n        </span>\n      </button>\n    </div>\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable\n        droppableId=\"list\"\n        isDropDisabled={false}\n      >\n        {provided => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            {\n              filteredContentConfigs\n              .map(\n                (contentConfig, index) => {\n                  const tmp_id = contentConfig.tmp_id\n                  const keys = {\n                    index,\n                    tmp_id,\n                  }\n\n                  return <Draggable\n                    key={tmp_id}\n                    draggableId={tmp_id}\n                    index={index}\n                    isDragDisabled={false}\n                    disableInteractiveElementBlocking={true}\n                    shouldRespectForcePress={true}\n                  >\n                    {provided => (\n                      <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n\n                        key={tmp_id}\n                        className={classes.row}\n                      >\n                      <div className={classes.form}>\n                        <InlineEditorBlock\n                          key={tmp_id}\n                          className={classes.item}\n                          dataset={{\n                            'data-index': index,\n                            'data-id': tmp_id,\n                          }}\n                          defaultContentConfig={contentConfig}\n\n                          reorderHandle={\n                            <button\n                              className={`text ${classes.inlineRowButton} ${classes.dragHandleButton}`}\n                              {...provided.dragHandleProps}\n                            >\n                              <DragIndicatorIcon />\n                            </button>\n                          }\n\n                          onRemoveRow={ () => {/*handleRemoveRow(index)*/} }\n                          addRowBefore={ (newValue) => addRowByIndex(index, 0, newValue) }\n                          addRowAfter={ (newValue) => addRowByIndex(index, 1, newValue) }\n\n                          onInputRef={(inputRef) => saveInputRef(keys, inputRef)}\n                          onGoToPrevInput={(attr) => goToPrevInput(keys, attr)}\n                          onGoToNextInput={(attr) => goToNextInput(keys, attr)}\n                          // onSplitText={(attr) => splitText(keys, attr)}\n                          onChange={(attr) => handleRowChange(keys, attr)}\n                          // onSplitText,\n                          // onMergeToPrevInput,\n                          // onMergeToNextInput,\n                          // {...repeater_props}\n                        />\n                      </div>\n                    </div>\n                    )}\n                  </Draggable>\n                }\n              )\n            }\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  </div>\n\n  <div\n    style={{\n      position: 'relative',\n      height: '50vh',\n      cursor: (filteredContentConfigs.length === 0 ? 'default' : 'text'),\n    }}\n    onClick={filteredContentConfigs.length === 0 ? null : focusLastLine}\n  ></div>\n  </>\n}\n\nexport default ContentEditor\n","import { useState, useCallback, useEffect } from 'react'\n\n// import {\n//   useParams\n// } from 'react-router-dom'\n\nimport useSaveBlock from '../hooks/useSaveBlock.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\n\n// import Select from 'react-select'\n\nimport {\n  ArrowBackSharp as BackIcon,\n\n  TranslateSharp as TranslateIcon,\n  IosShareSharp as ShareIcon,\n  LockSharp as PermissionsIcon,\n  SaveSharp as SaveIcon,\n  MoreHorizSharp as BlockMenuIcon,\n} from '@mui/icons-material'\n\nimport classes from './Editor.module.css'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\nimport { useTranslatedInputContext, LocalesMenu } from '../components/TranslatedInput.js'\n\nimport Header from '../components/Header.js'\nimport BlockMenu from '../components/BlockMenu.js'\nimport SharingEditor from '../components/SharingEditor.js'\nimport PermissionsEditor from '../components/PermissionsEditor.js'\nimport PropertiesEditor from '../components/PropertiesEditor.js'\nimport ContentEditor from '../components/ContentEditor.js'\n\n// import { OverflowMenu } from '../components/OverflowMenu.js'\n\n// const custom_react_select_styles = {\n//   menu: (provided, state) => ({\n//     ...provided,\n//     background: 'var(--purple)',\n//   }),\n// }\n// const custom_react_select_theme = theme => ({\n//   ...theme,\n//   borderRadius: 0,\n//   colors: {\n//     ...theme.colors,\n//     primary: 'var(--green)',\n//     primary25: 'var(--purple-dark)',\n//   },\n// })\n\nfunction Editor() {\n  const { getString } = useLocalization()\n\n  const saveBlock = useSaveBlock()\n  const loadBlock = useLoadBlock()\n\n  const { currentLocale } = useTranslatedInputContext()\n\n  const [ isSharingEditorOpen, setIsSharingEditorOpen ] = useState(false)\n  const openSharingEditor = useCallback(() => setIsSharingEditorOpen(true), [ setIsSharingEditorOpen ])\n  const closeSharingEditor = useCallback(() => setIsSharingEditorOpen(false), [ setIsSharingEditorOpen ])\n\n  const [ isPermissionsEditorOpen, setIsPermissionsEditorOpen ] = useState(false)\n  const openPermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(true), [ setIsPermissionsEditorOpen ])\n  const closePermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(false), [ setIsPermissionsEditorOpen ])\n\n  // const { id = '' } = useParams()\n  const id = '6145b2e319ba9712d370d347'\n\n  const [block, setBlock] = useState({\n    type: 'text',\n    properties: {},\n    content: {},\n  })\n  const type = block.type\n  const properties = block.properties\n  const content = block.content\n  const permissions = block.permissions\n\n  useEffect(() => {\n    if (id) {\n      loadBlock(id)\n        .then(loadedBlock => {\n          setBlock(loadedBlock)\n        })\n    }\n  }, [\n    loadBlock,\n    setBlock,\n    id,\n  ])\n\n  const saveType = useCallback(newType => {\n    if (newType !== block.type) {\n      const newBlock = {\n        ...block,\n        type: newType,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveProperties = useCallback(newProperties => {\n    if (newProperties !== block.properties) {\n      const newBlock = {\n        ...block,\n        properties: newProperties,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveContent = useCallback(newContent => {\n    if (newContent !== block.content) {\n      const newBlock = {\n        ...block,\n        content: newContent,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const savePermissions = useCallback(newPermissions => {\n    if (newPermissions !== block.permissions) {\n      const newBlock = {\n        ...block,\n        permissions: newPermissions,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const manuallySaveEverything = useCallback(() => {\n    saveBlock(block)\n      .then(gottenBlock => {\n        if (gottenBlock._id !== block._id) {\n          setBlock(gottenBlock)\n        }\n      })\n  }, [saveBlock, block, setBlock])\n\n  // const isFirstRun = useRef(true)\n  // useEffect(() => {\n  //   if (isFirstRun.current) {\n  //     isFirstRun.current = false\n  //     return;\n  //   }\n  //\n  //   if (\n  //     Object.keys(block).length > 0\n  //     && JSON.stringify(initialBlock) !== JSON.stringify(block)\n  //   ) {\n  //     console.log('initialBlock', initialBlock)\n  //     console.log('block', block)\n  //   }\n  // }, [isFirstRun, initialBlock, block])\n\n  if (typeof id === 'string' && id.length > 0) {\n\n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    {/* <button className=\"text\"><Localized id=\"path_editor_share\"/></button> */}\n\n\n    <LocalesMenu\n      trigger={triggerProps => (\n        <button {...triggerProps} className=\"text hasIcon\">\n          <TranslateIcon className=\"icon\" />\n          <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>\n            {/* <Localized id=\"path_editor_translate\" /> */}\n            {getString('locale_'+currentLocale)}\n          </span>\n        </button>\n      )}\n    />\n\n    {\n      isSharingEditorOpen\n      ? <SharingEditor\n          defaultBlock={block}\n          open={isSharingEditorOpen}\n          onClose={closeSharingEditor}\n          onChange={savePermissions}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openSharingEditor}>\n      <ShareIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_share\" /></span>\n    </button>\n\n    {\n      isPermissionsEditorOpen\n      ? <PermissionsEditor\n          defaultPermissions={permissions}\n          open={isPermissionsEditorOpen}\n          onClose={closePermissionsEditor}\n          onChange={savePermissions}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openPermissionsEditor}>\n      <PermissionsIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_permissions\" /></span>\n    </button>\n\n    <button className=\"text hasIcon\" onClick={manuallySaveEverything}>\n      <SaveIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_save\" /></span>\n    </button>\n\n    <BlockMenu\n      {...{\n        type,\n        setType: saveType,\n      }}\n\n      trigger={props => (\n        <button\n          {...props}\n          className=\"white hasIcon\"\n        >\n          <BlockMenuIcon className=\"icon\" />\n        </button>\n      )}\n    />\n  </div>\n\n  return <div className={`hasHeader ${classes.editor}`}>\n    <Header\n      // title={<a href={`https://volt.link/${slug}`} target=\"_blank\" rel=\"noopener noreferrer\"><span className=\"hideOnSmallScreen\">volt.link</span>/{slug}</a>}\n      title={\n        <button className=\"text hasIcon\" style={{ margin: '0' }}>\n          <BackIcon className=\"icon\"/>\n        </button>\n      }\n      rightActions={rightHeaderActions}\n    />\n\n    <PropertiesEditor\n      type={type}\n      defaultProperties={properties}\n      onChange={saveProperties}\n    />\n\n    <ContentEditor\n      onChange={saveContent}\n      defaultValue={content}\n    />\n  </div>\n  }\n\n  return null\n}\n\nexport default Editor\n","import React, { createContext, useState, useContext, useCallback } from 'react'\n\nimport classes from './OverflowMenu.module.css'\n\nexport const OverflowMenuContext = createContext()\n\nfunction OverflowMenuProvider(props) {\n  const [items, setItems] = useState({})\n\n  const updateMenu = useCallback(itemsToAdd => {\n    setItems({\n      ...items,\n      ...itemsToAdd,\n    })\n  }, [items])\n\n  const removeMenu = useCallback(itemsToRemove => {\n    const newItems = items\n    for (const key of itemsToRemove) {\n      delete newItems[key]\n    }\n    setItems(newItems)\n  }, [items])\n\n  const todoData = { items, updateMenu, removeMenu }\n\n  return <OverflowMenuContext.Provider value={todoData} {...props} />\n}\n\nfunction useOverflowMenu() {\n  return useContext(OverflowMenuContext)\n}\n\nfunction OverflowMenu () {\n  const { items } = useOverflowMenu()\n\n  const itemKeys = Object.keys(items || {})\n\n  if (itemKeys.length > 0) {\n    return (\n      <div className={classes.overflow_menu}>\n        {\n        itemKeys\n          .map((key) => {\n            if (items[key].menu) {\n              return <div key={key} className={classes.menuGroup}>\n                {items[key].menu}\n              </div>\n            }\n            return null\n          })\n          .filter(Boolean)\n        }\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport {\n  OverflowMenuProvider,\n  useOverflowMenu,\n  OverflowMenu,\n}\n\n\n/*\nimport React, { createContext, useContext, useCallback, useMemo } from 'react'\n\nconst OverflowMenuFunctionsContext = createContext({\n  addToMenu: () => {},\n  removeFromMenu: () => {},\n})\nOverflowMenuFunctionsContext.displayName = 'OverflowMenuFunctionsContext'\n\nfunction OverflowMenuProvider({ children }) {\n  const addToMenu = useCallback((itemsToAdd) => {\n    window.menuItems = {\n      ...window.menuItems,\n      ...itemsToAdd,\n    }\n  }, [])\n\n  const removeFromMenu = useCallback((itemsToRemove) => {\n    const newMenu = window.menuItems\n    for (const key of Object.keys(itemsToRemove)) {\n      delete newMenu[key]\n    }\n\n    window.menuItems = newMenu\n  }, [])\n\n  const functions = useMemo(() => ({\n    addToMenu,\n    removeFromMenu,\n  }), [addToMenu, removeFromMenu])\n\n  return (\n    <OverflowMenuFunctionsContext.Provider value={functions}>\n      {children}\n    </OverflowMenuFunctionsContext.Provider>\n  )\n}\n\nfunction useOverflowMenu () {\n  return useContext(OverflowMenuFunctionsContext)\n}\n\nfunction OverflowMenu () {\n  const menuItems = window.menuItems\n\n  return <div className=\"OverflowMenu\">\n    {Object.keys(menuItems || {}).map((key) => {\n      return <div key={key}>{key}</div>\n    })}\n  </div>\n}\n\nexport default OverflowMenu\n\nexport {\n  OverflowMenuProvider,\n  useOverflowMenu,\n  OverflowMenu,\n}\n*/\n","import React from 'react'\n\nimport classes from './App.module.css'\n\nimport {\n  Switch,\n  Route,\n  useRouteMatch,\n} from 'react-router-dom'\n\nimport { withLocalization } from '../fluent/Localized.js'\nimport { useHistory } from 'react-router-dom'\n\nimport Localized from '../fluent/Localized.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\nimport Chooser from './Chooser.js'\nimport Shortcode from './Shortcode.js'\nimport Editor from './Editor.js'\n\nimport { OverflowMenuProvider } from '../components/OverflowMenu.js'\n\nimport MultiButton from '../components/MultiButton.js'\n\nfunction App({ getString }) {\n  const [, loggedIn] = useUser()\n\n  const history = useHistory()\n  const menuRouteMatch = useRouteMatch(\"/:id\")\n  const selected_route = menuRouteMatch ? menuRouteMatch.params.id :''\n\n  const handleMenu = new_selected => {\n    switch (new_selected) {\n      case 'shortcode':\n        history.push('/shortcode')\n        break\n      case 'list':\n        window.open(`${window.domains.backend}list`,'_blank')\n        break\n      default:\n        history.push('/')\n    }\n  }\n\n  const loginLogoutButton = (\n    loggedIn\n      ? <>\n        <MultiButton\n          onChange={handleMenu}\n          ariaLabel={getString('main_menu')}\n          defaultValue={selected_route}\n          items={[\n            { value: '', title: getString('menu_micropages') },\n            { value: 'shortcode', title: getString('menu_url_shortener') },\n            { value: 'list', title: getString('menu_list') },\n          ]}\n        />\n        <a href={`${window.domains.backend}logout?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n          <button className=\"red\" style={{ marginRight: '0' }}><Localized id=\"logout\"/></button>\n        </a>\n      </>\n      : <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n        <button style={{ marginRight: '0' }}><Localized id=\"login\"/></button>\n      </a>\n  )\n\n  return (<>\n    <div className={classes.app}>\n      {\n        !loggedIn\n          ? <div>\n            <Header\n              title=\"edit.volt.link\"\n              rightActions={loginLogoutButton}\n            />\n            <p><Localized id=\"login_prompt\"/></p>\n          </div>\n          : <>\n              <Switch>\n                <Route path=\"/edit/:code\">\n                  <OverflowMenuProvider>\n                    <Editor />\n                  </OverflowMenuProvider>\n                </Route>\n                <Route path=\"/shortcode\">\n                  <Shortcode rightHeaderActions={loginLogoutButton} />\n                </Route>\n                <Route path=\"/\">\n                  <Chooser rightHeaderActions={loginLogoutButton} />\n                </Route>\n              </Switch>\n            </>\n      }\n    </div>\n  </>)\n}\n\nexport default withLocalization(App)\n","import React, { useEffect, useState } from 'react'\n\n// https://projectfluent.org/play/\n\n// import { LocalizationProvider, Localized } from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\n\nexport const locales = {\n  de: 'Deutsch',\n  en: 'English',\n  // es: 'Espaol',\n  // pt: 'Portugus',\n  fr: 'Franais',\n  // it: 'Italiano',\n  // nl: 'Dutch',\n  // pl: 'Polska',\n  // ru: 'P',\n}\n\nconst _supportedLocales_ = Object.keys(locales)\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n  const path = await import('../locales/' + locale + '.ftl')\n\n  const response = await fetch(path.default)\n  const messages = await response.text()\n\n  return { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles() {\n  const bundle = new FluentBundle('')\n  bundle.addResource(new FluentResource(''))\n  return new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n  const fetched = await Promise.all(\n    currentLocales.map(fetchMessages)\n  )\n  const messages = fetched.reduce(\n    (obj, cur) => Object.assign(obj, cur)\n  )\n\n  return function* generateBundles() {\n    for (const locale of currentLocales) {\n      const bundle = new FluentBundle(locale)\n      bundle.addResource(messages[locale])\n      yield bundle\n    }\n  }\n}\n\nexport function AppLocalizationProvider({ userLocales, children, onLocaleChange }) {\n  const [bundles, setBundles] = useState(getDefaultBundles())\n\n  useEffect(() => {\n    async function loadBundles() {\n      const currentLocales = negotiateLanguages(\n        userLocales,\n        _supportedLocales_,\n        { defaultLocale: _defaultLocale_ }\n      )\n\n      if (!!onLocaleChange) {\n        onLocaleChange(currentLocales)\n      }\n\n      const generateBundles = await createMessagesGenerator(currentLocales)\n\n      const new_bundles = new ReactLocalization(generateBundles())\n      new_bundles.userLocales = userLocales\n      new_bundles.defaultLocale = _defaultLocale_\n      new_bundles.supportedLocales = _supportedLocales_\n      setBundles(new_bundles)\n    }\n    loadBundles()\n  }, [userLocales, onLocaleChange])\n\n  if (!bundles) {\n    // Show a loader.\n    return <div>Loading texts</div>\n  }\n\n  return <LocalizationProvider l10n={bundles}>\n    {children}\n  </LocalizationProvider>\n}\n\n","import React, { useState, useEffect, useCallback } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './pages/App.js'\n// import reportWebVitals from './reportWebVitals'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider, locales } from './fluent/l10n.js'\nimport { TranslatedInputProvider } from './components/TranslatedInput.js'\n\nimport useMediaQuery from '@mui/material/useMediaQuery'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\n\nimport { SnackbarProvider } from 'notistack'\n\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n} from '@apollo/client'\n\nwindow.domains = {\n  frontend: 'https://beta.volt.link',\n  // frontend: 'http://localhost:3000/',\n  backend: 'https://api.volt.link/',\n  // backend: 'http://localhost:4000/',\n}\n\nconst client = new ApolloClient({\n  uri: window.domains.backend+'graphql/v1/',\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    watchQuery: {\n      fetchPolicy: 'cache-and-network',\n    },\n  },\n})\n\n// client\n//   .query({\n//     query: gql`\n//       query GetRates {\n//         rates(currency: \"USD\") {\n//           currency\n//         }\n//       }\n//     `\n//   })\n//   .then(result => console.info(result));\n\nfunction AppLanguageWrapper() {\n  // const [userLocales, setUserLocales] = useState(['de'])\n  const [userLocales, setUserLocales] = useState(navigator.languages)\n  const [currentLocale, setCurrentLocale] = useState(null)\n\n  useEffect(() => {\n    if (!!window.umami) {\n      let systemLocales = navigator.languages\n      if (!!systemLocales || Array.isArray(systemLocales)) {\n        for (let locale of systemLocales) {\n          locale = locale.toLowerCase() // Not really correct but the system locales sadly don't conform to the standard.\n\n          const language = locale.split('-')[0]\n          if (language !== locale) {\n            window.umami.trackEvent('L: ' + language) // Log just the language.\n          }\n          window.umami.trackEvent('L: ' + locale) // Log the full locale.\n        }\n      }\n    }\n  }, [])\n\n  const handleLanguageChange = useCallback(event => {\n    setUserLocales([event.target.dataset.locale])\n  }, [setUserLocales])\n\n  const handleCurrentLocalesChange = useCallback(currentLocales => {\n    setCurrentLocale(currentLocales.length > 0 ? currentLocales[0] : '')\n  }, [setCurrentLocale])\n\n\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)')\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode: prefersDarkMode ? 'dark' : 'light',\n        },\n      }),\n    [prefersDarkMode],\n  )\n\n  return <>\n  <div\n    id=\"react-notification\"\n    key=\"react-notification\"\n    style={{zIndex: '10000'}}\n  ></div>\n\n  <AppLocalizationProvider\n    key=\"AppLocalizationProvider\"\n    userLocales={userLocales}\n    onLocaleChange={handleCurrentLocalesChange}\n  >\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={theme}>\n        <SnackbarProvider\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          domRoot={document.getElementById('react-notification')}\n        >\n          <TranslatedInputProvider>\n            <App locales={locales} currentLocale={currentLocale} onLanguageChange={handleLanguageChange} />\n          </TranslatedInputProvider>\n        </SnackbarProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  </AppLocalizationProvider>\n  </>\n}\n\nReactDOM.render(\n  <Router>\n    <AppLanguageWrapper />\n  </Router>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsWrapper\":\"PermissionsEditor_dialogsWrapper__1NCM8\",\"dialog\":\"PermissionsEditor_dialog__2EbnA\",\"backdrop\":\"PermissionsEditor_backdrop__2MI4X\",\"inputWrapper\":\"PermissionsEditor_inputWrapper__265Sc\",\"emailInput\":\"PermissionsEditor_emailInput__3jNhM\",\"permissionRow\":\"PermissionsEditor_permissionRow__1lu2X\",\"menuButton\":\"PermissionsEditor_menuButton__3u1a9\",\"ownerInfo\":\"PermissionsEditor_ownerInfo__1TNAF\",\"actions\":\"PermissionsEditor_actions__69hJH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_headline\":\"PropertiesEditor_main_headline__19CKp\",\"main_headline_input\":\"PropertiesEditor_main_headline_input__1GBIN\",\"propertiesFrame\":\"PropertiesEditor_propertiesFrame__2H0EZ\",\"properties_row\":\"PropertiesEditor_properties_row__1nKs3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"SharingEditor_dialog__1xS0T\",\"backdrop\":\"SharingEditor_backdrop__3kXEj\",\"inputWrapper\":\"SharingEditor_inputWrapper__108cK\",\"input\":\"SharingEditor_input__s4ABQ\",\"actions\":\"SharingEditor_actions__2PKMI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"InlineEditorBlock_block__1c6TI\",\"block_input\":\"InlineEditorBlock_block_input__2oKDG\",\"form_deactivated\":\"InlineEditorBlock_form_deactivated__f_zVv\",\"form_active\":\"InlineEditorBlock_form_active__2KDya\",\"reorderHandle\":\"InlineEditorBlock_reorderHandle__3-qkx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"Repeater_row__1ODoF\",\"middleActions\":\"Repeater_middleActions__3nRoT\",\"trigger\":\"Repeater_trigger__1VtG5\",\"content\":\"Repeater_content__110R9\",\"form\":\"Repeater_form__2N6kw\",\"item\":\"Repeater_item__2OI78\",\"inlineRowButton\":\"Repeater_inlineRowButton__uqk8Y\",\"dragHandleButton\":\"Repeater_dragHandleButton__2eLww\",\"addRowButton\":\"Repeater_addRowButton__3huSP\"};"],"sourceRoot":""}